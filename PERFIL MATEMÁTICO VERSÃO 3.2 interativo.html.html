<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil Matem√°tico - Modo Apresenta√ß√£o</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .tela {
            display: none;
            min-height: 100vh;
            padding: 15px;
        }

        .tela.ativa {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 15px 30px rgba(0,0,0,0.1);
            max-width: 1100px;
            width: 100%;
            max-height: 95vh;
            overflow-y: auto;
        }

        h1 {
            text-align: center;
            color: #4a5568;
            margin-bottom: 15px;
            font-size: 2em;
        }

        h2 {
            text-align: center;
            color: #4a5568;
            margin-bottom: 12px;
            font-size: 1.5em;
        }

        /* Modal de Sele√ß√£o de Categoria */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.ativa {
            display: flex;
        }

        .modal-conteudo {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        .modal h3 {
            margin-bottom: 20px;
            color: #4a5568;
            font-size: 1.4em;
        }

        .categorias-modal {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .btn-categoria-modal {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-categoria-modal:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-categoria-modal.esgotada {
            background: #cbd5e0;
            color: #718096;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .btn-fechar-modal {
            background: #718096;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            width: 100%;
        }

        /* Tela Configura√ß√£o Compacta */
        .config-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            gap: 15px;
        }

        .config-selects {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            flex: 1;
        }

        .config-selects select {
            padding: 10px;
            border: 2px solid #cbd5e0;
            border-radius: 6px;
            font-size: 0.9em;
        }

        .config-equipes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin: 15px 0;
        }

        .equipe-config {
            background: #f7fafc;
            padding: 15px;
            border-radius: 10px;
            border: 2px dashed #cbd5e0;
        }

        .equipe-config h3 {
            margin-bottom: 10px;
            color: #4a5568;
            font-size: 1em;
        }

        .input-equipe {
            width: 100%;
            padding: 8px;
            border: 2px solid #cbd5e0;
            border-radius: 6px;
            font-size: 0.9em;
            margin-bottom: 8px;
        }

        .cor-equipe {
            width: 100%;
            height: 35px;
            border: 2px solid #cbd5e0;
            border-radius: 6px;
            margin-bottom: 8px;
            cursor: pointer;
        }

        .btn-adicionar-equipe {
            background: #edf2f7;
            border: 2px dashed #cbd5e0;
            border-radius: 10px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            color: #718096;
        }

        .btn-adicionar-equipe:hover {
            background: #e2e8f0;
            border-color: #667eea;
            color: #667eea;
        }

        .btn-adicionar-equipe .icone {
            font-size: 1.5em;
            margin-bottom: 5px;
        }

        .btn-principal {
            background: #48bb78;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 6px;
            font-size: 1.1em;
            cursor: pointer;
            width: 100%;
            margin-top: 15px;
            transition: background 0.3s;
        }

        .btn-principal:hover {
            background: #38a169;
        }

        /* Tela do Jogo - Layout Compacto */
        .layout-apresentacao {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 20px;
            height: 100%;
        }

        /* √Årea Principal - Cartas e Dicas Compacta */
        .area-principal {
            background: #f7fafc;
            border-radius: 12px;
            padding: 20px;
            border: 2px solid #e2e8f0;
        }

        .carta-apresentacao {
            position: relative;
        }

        .categoria-indicator {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            text-align: center;
            font-weight: bold;
            font-size: 1.1em;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .categoria-numeros {
            background: linear-gradient(135deg, #4299e1, #3182ce);
        }

        .categoria-algebra {
            background: linear-gradient(135deg, #48bb78, #38a169);
        }

        .categoria-geometria {
            background: linear-gradient(135deg, #9f7aea, #805ad5);
        }

        .categoria-trigonometria {
            background: linear-gradient(135deg, #ed8936, #dd6b20);
        }

        .categoria-historia {
            background: linear-gradient(135deg, #ecc94b, #d69e2e);
        }

        .categoria-aleatoria {
            background: linear-gradient(135deg, #ed64a6, #d53f8c);
        }

        .carta-apresentacao h3 {
            text-align: center;
            color: #4a5568;
            margin-bottom: 15px;
            font-size: 1.8em;
        }

        .dicas-apresentacao {
            display: grid;
            grid-template-columns: 1fr;
            gap: 8px;
            margin-bottom: 15px;
        }

        .dica-apresentacao {
            background: white;
            padding: 12px;
            border-radius: 8px;
            border-left: 5px solid #667eea;
            transition: all 0.3s;
            border: 2px solid #e2e8f0;
            min-height: 55px;
            display: flex;
            align-items: center;
            font-size: 0.95em;
        }

        .dica-apresentacao.revelada {
            background: #c6f6d5;
            border-left-color: #48bb78;
        }

        .dica-apresentacao.bloqueada {
            background: #f7fafc;
            color: #a0aec0;
            border-left-color: #cbd5e0;
        }

        .dica-apresentacao.atual {
            background: #bee3f8;
            border-left-color: #3182ce;
            animation: pulsar 2s infinite;
            font-weight: bold;
        }

        .dica-numero {
            font-weight: bold;
            margin-right: 10px;
            color: #4a5568;
            min-width: 25px;
            font-size: 0.95em;
        }

        /* √Årea de Tentativa de Resposta Compacta */
        .area-resposta {
            background: #edf2f7;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border: 2px solid #e2e8f0;
        }

        .input-resposta {
            width: 100%;
            padding: 10px;
            border: 2px solid #cbd5e0;
            border-radius: 6px;
            font-size: 1em;
            margin-bottom: 10px;
        }

        .btn-tentar {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 1em;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
        }

        .btn-tentar:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .resultado-tentativa {
            padding: 10px;
            border-radius: 6px;
            margin-top: 10px;
            text-align: center;
            font-weight: bold;
            font-size: 1em;
            display: none;
        }

        .resultado-correto {
            background: #c6f6d5;
            color: #22543d;
            border: 2px solid #48bb78;
            display: block;
        }

        .resultado-incorreto {
            background: #fed7d7;
            color: #742a2a;
            border: 2px solid #e53e3e;
            display: block;
        }

        /* √Årea Lateral Compacta */
        .area-lateral {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* Placar Compacto */
        .placar-equipes {
            background: #2d3748;
            border-radius: 12px;
            padding: 15px;
            color: white;
        }

        .placar-equipes h3 {
            text-align: center;
            margin-bottom: 15px;
            color: #e2e8f0;
            font-size: 1.2em;
        }

        .lista-equipes {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .equipe-placar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-radius: 8px;
            background: rgba(255,255,255,0.1);
            transition: all 0.3s;
            cursor: pointer;
        }

        .equipe-placar.ativa {
            background: rgba(74, 222, 128, 0.3);
            transform: scale(1.02);
            border: 2px solid #48bb78;
        }

        .equipe-placar:hover:not(.ativa) {
            background: rgba(255,255,255,0.2);
            transform: scale(1.01);
        }

        .info-equipe {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .cor-marcador {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 2px solid white;
        }

        .nome-equipe {
            font-weight: bold;
            font-size: 0.95em;
        }

        .pontos-equipe {
            font-size: 1.1em;
            font-weight: bold;
            color: #48bb78;
        }

        .btn-editar-placar {
            background: #ecc94b;
            color: #744210;
            border: none;
            padding: 4px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8em;
            margin-left: 8px;
            transition: all 0.3s;
        }

        .btn-editar-placar:hover {
            background: #d69e2e;
            transform: scale(1.05);
        }

        /* Controles do Professor Compactos */
        .controles-professor {
            background: #edf2f7;
            border-radius: 12px;
            padding: 15px;
            border: 2px solid #e2e8f0;
        }

        .controles-professor h3 {
            text-align: center;
            margin-bottom: 15px;
            color: #4a5568;
            font-size: 1.2em;
        }

        .time-atual {
            text-align: center;
            background: #bee3f8;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 2px solid #3182ce;
            font-weight: bold;
            font-size: 1em;
        }

        .acoes-professor {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 10px;
        }

        .btn-acao-prof {
            padding: 10px;
            border: none;
            border-radius: 8px;
            font-size: 0.95em;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            font-weight: bold;
        }

        .btn-dica-prof {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-revelar-resposta {
            background: linear-gradient(135deg, #ed8936, #dd6b20);
            color: white;
        }

        .btn-transferir {
            background: linear-gradient(135deg, #805ad5, #6b46c1);
            color: white;
        }

        .btn-proxima {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
        }

        .btn-acao-prof:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .btn-acao-prof:disabled {
            background: #cbd5e0;
            color: #718096;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Resposta Revelada Compacta */
        .resposta-revelada {
            background: linear-gradient(135deg, #f6e05e, #d69e2e);
            padding: 15px;
            border-radius: 8px;
            margin: 12px 0;
            border: 2px solid #ecc94b;
            text-align: center;
            display: none;
        }

        .resposta-revelada.ativa {
            display: block;
        }

        .resposta-revelada h4 {
            color: #744210;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .resposta-correta {
            font-size: 1.4em;
            font-weight: bold;
            color: #744210;
        }

        /* Tela de Resultado Final Compacta */
        .resultado-final {
            text-align: center;
        }

        .vencedor {
            background: linear-gradient(135deg, #f6e05e, #d69e2e);
            padding: 20px;
            border-radius: 12px;
            margin: 15px 0;
            border: 3px solid #ecc94b;
        }

        .vencedor h2 {
            color: #744210;
            font-size: 1.8em;
            margin-bottom: 8px;
        }

        .pontuacao-vencedor {
            font-size: 2.2em;
            color: #744210;
            font-weight: bold;
        }

        .classificacao {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }

        .posicao {
            background: #f7fafc;
            padding: 15px;
            border-radius: 8px;
            border: 2px solid #e2e8f0;
        }

        .posicao.primeiro {
            background: linear-gradient(135deg, #f6e05e, #d69e2e);
            border-color: #ecc94b;
        }

        .posicao.segundo {
            background: linear-gradient(135deg, #e2e8f0, #cbd5e0);
            border-color: #a0aec0;
        }

        .posicao.terceiro {
            background: linear-gradient(135deg, #ed8936, #dd6b20);
            border-color: #ed8936;
        }

        /* Bot√µes de Exporta√ß√£o */
        .botoes-exportacao {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 20px 0;
        }

        .btn-exportar {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-exportar:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-pdf {
            background: linear-gradient(135deg, #e53e3e, #c53030);
        }

        .btn-excel {
            background: linear-gradient(135deg, #38a169, #2f855a);
        }

        /* Modal Edi√ß√£o Placar */
        .modal-edicao-placar {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal-edicao-placar.ativa {
            display: flex;
        }

        .modal-edicao-conteudo {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
            max-width: 400px;
            width: 90%;
            text-align: center;
        }

        .modal-edicao-conteudo h3 {
            margin-bottom: 20px;
            color: #4a5568;
            font-size: 1.3em;
        }

        .info-equipe-edicao {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding: 15px;
            background: #f7fafc;
            border-radius: 8px;
            border: 2px solid #e2e8f0;
        }

        .input-pontos {
            width: 100px;
            padding: 10px;
            border: 2px solid #cbd5e0;
            border-radius: 6px;
            font-size: 1.1em;
            text-align: center;
            font-weight: bold;
        }

        .botoes-edicao {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 20px;
        }

        .btn-confirmar {
            background: #48bb78;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
        }

        .btn-cancelar {
            background: #718096;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
        }

        /* Controles de Som */
        .controles-som {
            background: #2d3748;
            border-radius: 12px;
            padding: 15px;
            color: white;
            margin-top: 15px;
        }

        .controles-som h3 {
            text-align: center;
            margin-bottom: 15px;
            color: #e2e8f0;
            font-size: 1.1em;
        }

        .botoes-som {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
        }

        .btn-som {
            background: #4a5568;
            color: white;
            border: none;
            padding: 8px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
        }

        .btn-som:hover {
            background: #718096;
        }

        .btn-som.ativo {
            background: #48bb78;
        }

        /* Anima√ß√µes */
        @keyframes pulsar {
            0% { transform: scale(1); }
            50% { transform: scale(1.01); }
            100% { transform: scale(1); }
        }

        @keyframes revelar {
            0% { transform: translateX(-15px); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }

        .dica-revelada {
            animation: revelar 0.4s ease-out;
        }

        @keyframes acerto {
            0% { background-color: #48bb78; }
            50% { background-color: #68d391; }
            100% { background-color: #48bb78; }
        }

        @keyframes erro {
            0% { background-color: #e53e3e; }
            50% { background-color: #fc8181; }
            100% { background-color: #e53e3e; }
        }

        /* Responsividade para telas menores */
        @media (max-width: 1024px) {
            .layout-apresentacao {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .container {
                margin: 10px;
                padding: 15px;
                max-height: none;
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.6em;
            }
            
            .config-equipes {
                grid-template-columns: 1fr;
            }
            
            .config-header {
                flex-direction: column;
            }
            
            .config-selects {
                grid-template-columns: 1fr;
            }
            
            .categorias-modal {
                grid-template-columns: 1fr;
            }
            
            .botoes-exportacao {
                grid-template-columns: 1fr;
            }
            
            .botoes-som {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Modal de Sele√ß√£o de Categoria -->
    <div id="modalCategoria" class="modal">
        <div class="modal-conteudo">
            <h3>üéØ ESCOLHA A CATEGORIA DA PR√ìXIMA CARTA</h3>
            <div class="categorias-modal">
                <button class="btn-categoria-modal" data-categoria="numeros">üî¢ N√öMEROS</button>
                <button class="btn-categoria-modal" data-categoria="algebra">üìê √ÅLGEBRA</button>
                <button class="btn-categoria-modal" data-categoria="geometria">üìè GEOMETRIA</button>
                <button class="btn-categoria-modal" data-categoria="trigonometria">üìä TRIGONOMETRIA</button>
                <button class="btn-categoria-modal" data-categoria="historia">üìú HIST√ìRIA</button>
                <button class="btn-categoria-modal" data-categoria="aleatoria">üé≤ ALEAT√ìRIA</button>
            </div>
            <button id="btnFecharModal" class="btn-fechar-modal">FECHAR</button>
        </div>
    </div>

    <!-- Modal de Edi√ß√£o do Placar -->
    <div id="modalEdicaoPlacar" class="modal-edicao-placar">
        <div class="modal-edicao-conteudo">
            <h3>‚úèÔ∏è EDITAR PONTUA√á√ÉO</h3>
            <div id="infoEquipeEdicao" class="info-equipe-edicao">
                <!-- Conte√∫do din√¢mico -->
            </div>
            <div>
                <label style="display: block; margin-bottom: 8px; font-weight: bold; color: #4a5568;">Nova Pontua√ß√£o:</label>
                <input type="number" id="inputNovosPontos" class="input-pontos" min="0" value="0">
            </div>
            <div class="botoes-edicao">
                <button id="btnConfirmarEdicao" class="btn-confirmar">‚úÖ CONFIRMAR</button>
                <button id="btnCancelarEdicao" class="btn-cancelar">‚ùå CANCELAR</button>
            </div>
        </div>
    </div>

    <!-- Tela de Configura√ß√£o Compacta -->
    <div id="telaConfiguracao" class="tela ativa">
        <div class="container">
            <h1>üéØ PERFIL MATEM√ÅTICO - MODO APRESENTA√á√ÉO</h1>
            
            <div class="config-header">
                <div class="config-selects">
                    <select id="selectCategoria">
                        <option value="numeros">üî¢ N√öMEROS</option>
                        <option value="algebra">üìê √ÅLGEBRA</option>
                        <option value="geometria">üìè GEOMETRIA</option>
                        <option value="trigonometria">üìä TRIGONOMETRIA</option>
                        <option value="historia">üìú HIST√ìRIA</option>
                        <option value="aleatoria">üé≤ ALEAT√ìRIA</option>
                    </select>
                    
                    <select id="selectRodadas">
                        <option value="5">5 Rodadas</option>
                        <option value="10" selected>10 Rodadas</option>
                        <option value="15">15 Rodadas</option>
                        <option value="20">20 Rodadas</option>
                        <option value="25">25 Rodadas</option>
                        <option value="30">30 Rodadas</option>
                        <option value="35">35 Rodadas</option>
                        <option value="40">40 Rodadas</option>
                        <option value="45">45 Rodadas</option>
                        <option value="50">50 Rodadas</option>
                    </select>
                </div>
            </div>

            <div class="config-equipes" id="containerEquipes">
                <!-- Equipes ser√£o adicionadas dinamicamente -->
            </div>

            <button id="btnIniciarApresentacao" class="btn-principal">üéÆ INICIAR MODO APRESENTA√á√ÉO</button>
        </div>
    </div>

    <!-- Tela do Jogo - Modo Apresenta√ß√£o Compacto -->
    <div id="telaApresentacao" class="tela">
        <div class="container">
            <div class="layout-apresentacao">
                <!-- √Årea Principal - Cartas -->
                <div class="area-principal">
                    <div class="carta-apresentacao">
                        <!-- INDICADOR DE CATEGORIA NOVO -->
                        <div id="categoriaIndicator" class="categoria-indicator categoria-numeros">
                            <span id="categoriaIcone">üî¢</span>
                            <span id="categoriaNome">N√öMEROS</span>
                        </div>
                        
                        <h3 id="tituloCarta">EU SOU...</h3>
                        <div id="dicasContainer" class="dicas-apresentacao">
                            <!-- Dicas ser√£o geradas pelo JavaScript -->
                        </div>

                        <!-- √Årea de Tentativa de Resposta -->
                        <div class="area-resposta">
                            <input type="text" id="inputResposta" class="input-resposta" placeholder="Digite a resposta da equipe...">
                            <button id="btnTentarResposta" class="btn-tentar">üéØ TENTAR RESPOSTA</button>
                            <div id="resultadoTentativa" class="resultado-tentativa"></div>
                        </div>

                        <!-- Resposta Revelada -->
                        <div id="respostaRevelada" class="resposta-revelada">
                            <h4>RESPOSTA CORRETA:</h4>
                            <div id="respostaCorreta" class="resposta-correta">TRI√ÇNGULO</div>
                        </div>
                    </div>
                </div>

                <!-- √Årea Lateral - Placar e Controles -->
                <div class="area-lateral">
                    <!-- Placar -->
                    <div class="placar-equipes">
                        <h3>üèÜ PLACAR AO VIVO</h3>
                        <div id="listaPlacar" class="lista-equipes">
                            <!-- Equipes ser√£o geradas pelo JavaScript -->
                        </div>
                    </div>

                    <!-- Controles do Professor -->
                    <div class="controles-professor">
                        <h3>üë®‚Äçüè´ CONTROLES</h3>
                        
                        <div id="timeAtual" class="time-atual">
                            Time Alpha
                        </div>

                        <div class="acoes-professor">
                            <!-- NOVO BOT√ÉO: Transfer√™ncia Volunt√°ria -->
                            <button id="btnTransferirVoluntariamente" class="btn-acao-prof btn-transferir">
                                üîÑ TRANSFERIR QUEST√ÉO
                            </button>

                            <button id="btnProximaDica" class="btn-acao-prof btn-dica-prof">
                                üí° PR√ìXIMA DICA
                            </button>

                            <button id="btnRevelarResposta" class="btn-acao-prof btn-revelar-resposta">
                                üîì REVELAR RESPOSTA
                            </button>

                            <button id="btnTransferir" class="btn-acao-prof btn-transferir" style="display: none;">
                                üîÑ TRANSFERIR PERGUNTA
                            </button>

                            <button id="btnProximaCarta" class="btn-acao-prof btn-proxima">
                                ‚û°Ô∏è PR√ìXIMA CARTA
                            </button>

                            <button id="btnFinalizarJogo" class="btn-acao-prof" style="background: #718096; color: white;">
                                üèÅ FINALIZAR
                            </button>
                        </div>
                    </div>

                    <!-- NOVA SE√á√ÉO: Controles de Som -->
                    <div class="controles-som">
                        <h3>üéµ CONTROLES DE SOM</h3>
                        <div class="botoes-som">
                            <button id="btnAtivarSons" class="btn-som ativo">üîä SONS ATIVOS</button>
                            <button id="btnDesativarSons" class="btn-som">üîá SILENCIAR</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tela de Resultado Final Compacta -->
    <div id="telaResultadoFinal" class="tela">
        <div class="container">
            <div class="resultado-final">
                <h1>üéâ JOGO FINALIZADO!</h1>
                
                <div id="areaVencedor" class="vencedor">
                    <h2 id="nomeVencedor">TIME ALPHA</h2>
                    <div class="pontuacao-vencedor" id="pontuacaoVencedor">250 PONTOS</div>
                </div>

                <h2>üèÖ CLASSIFICA√á√ÉO FINAL</h2>
                <div id="classificacaoFinal" class="classificacao">
                    <!-- Classifica√ß√£o ser√° gerada pelo JavaScript -->
                </div>

                <!-- BOT√ïES DE EXPORTA√á√ÉO -->
                <div class="botoes-exportacao">
                    <button id="btnExportarPDF" class="btn-exportar btn-pdf">
                        üìÑ EXPORTAR PDF
                    </button>
                    <button id="btnExportarExcel" class="btn-exportar btn-excel">
                        üìä EXPORTAR EXCEL
                    </button>
                </div>

                <button id="btnNovoJogo" class="btn-principal">üîÑ NOVO JOGO</button>
            </div>
        </div>
    </div>

    <!-- BIBLIOTECAS PARA EXPORTA√á√ÉO -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <script>
        // BANCO COMPLETO DE CARTAS - 100 QUEST√ïES!
        const cartasPorCategoria = {
            numeros: [
                {
                    resposta: "MMC",
                    dicas: [
                        "Rela√ß√£o entre 2 ou mais n√∫meros",
                        "Menor fator de 2 n√∫meros",
                        "Entre 3 e 4, eu sou o 12",
                        "Em (1/3 + 1/5), sou o 15",
                        "Sou descoberto pela fatora√ß√£o",
                        "Sou usado na opera√ß√£o de fra√ß√µes",
                        "Sou dito em sigla",
                        "Em geral sou denominador"
                    ]
                },
                {
                    resposta: "MDC",
                    dicas: [
                        "Maior fator de 2 n√∫meros",
                        "Sou descoberto pela fatora√ß√£o",
                        "Entre (10,15,25,35) eu sou 5",
                        "Sou dito em sigla",
                        "Me estudo junto com MMC",
                        "Rela√ß√£o entre 2 ou mais n√∫meros",
                        "Entre 12 e 18, eu sou o 6",
                        "Usado para achar o divisor comum"
                    ]
                },
                {
                    resposta: "ZERO",
                    dicas: [
                        "N√£o tenho valor",
                        "Multiplicando comigo se anulam",
                        "N√∫meros negativos me t√™m",
                        "Sou elemento neutro da adi√ß√£o",
                        "Na reta estou entre -1 e 1",
                        "Geralmente sou a origem",
                        "Sou par",
                        "Dividindo por mim d√° erro"
                    ]
                },
                {
                    resposta: "PAR",
                    dicas: [
                        "Formo dupla",
                        "Tem um de mim nos primos",
                        "O 34 faz parte de mim",
                        "N√£o sou √≠mpar",
                        "Sou um grupo de n√∫meros",
                        "Formo um casal",
                        "O 27 n√£o est√° em mim",
                        "(2, 4, 6, 8, 10, 12, ...)"
                    ]
                },
                {
                    resposta: "IMPAR",
                    dicas: [
                        "Posso ser sozinho",
                        "N√£o sou par",
                        "Formo trio",
                        "Sou quase todos os primos",
                        "(1, 3, 5, 7, 9, 11, ...)",
                        "Sou um grupo de n√∫meros",
                        "O dois n√£o est√° em mim",
                        "O 379 est√° em mim"
                    ]
                },
                {
                    resposta: "PRIMO",
                    dicas: [
                        "MDC (a,b) = 1",
                        "Possuo somente dois divisores",
                        "(2,3,5,7,11,13,...)",
                        "Sou um grupo num√©rico",
                        "Sou usado para fatorar",
                        "Tenho um n√∫mero par",
                        "Sou quase todo √≠mpar",
                        "Divido por 1 e eu mesmo"
                    ]
                },
                {
                    resposta: "DECIMAL",
                    dicas: [
                        "Posso ser exato",
                        "N√£o sou Natural",
                        "Posso ser escrito em fra√ß√£o",
                        "Sou Racional",
                        "Tenho v√≠rgula",
                        "Posso ser n√£o exato",
                        "Posso ter casas decimais",
                        "Sou um tipo de numero"
                    ]
                },
                {
                    resposta: "NATURAL",
                    dicas: [
                        "Tenho apenas n√∫meros positivos",
                        "Sou um conjunto",
                        "N√£o tenho decimais",
                        "N√£o posso ser negativo",
                        "Sou um grupo de n√∫meros",
                        "Estou nos Reais",
                        "N√£o tenho negativos",
                        "Estou do lado direito do zero na reta num√©rica"
                    ]
                },
                {
                    resposta: "INTEIRO",
                    dicas: [
                        "(..., -2, -1, 0, 1, 2, ...)",
                        "Sou positivo",
                        "A letra Z me representa",
                        "N√£o estou nos Naturais",
                        "Sou negativo",
                        "Estou nos Reais",
                        "Estou nos Racionais",
                        "Tenho todos os Naturais em meu conjunto"
                    ]
                },
                {
                    resposta: "RACIONAL",
                    dicas: [
                        "Sou inteiro",
                        "Posso ser escrito em forma de fra√ß√£o",
                        "Sou Natural",
                        "Sou um conjunto num√©rico",
                        "Sou decimais finitos",
                        "Sou fra√ß√µes",
                        "Sou d√≠zimas peri√≥dicas",
                        "O s√≠mbolo Q me representa"
                    ]
                },
                {
                    resposta: "DEZENA",
                    dicas: [
                        "Em anos sou uma d√©cada",
                        "N√£o sou centena",
                        "Posso ser militar",
                        "Meio de mim √© 5",
                        "Sou um grupo de unidades",
                        "Sou 10 unidades",
                        "Sou um 3 de mim",
                        "Sou estudado com material dourado"
                    ]
                },
                {
                    resposta: "CENTENA",
                    dicas: [
                        "Posso ser militar",
                        "Sou 10 dezenas",
                        "Em grupo de 100 minutos",
                        "Em ano 200 minutos",
                        "Em ano 500 minutos",
                        "Sou 100 unidades",
                        "Em 20 de minuto",
                        "Sou o quadrado no material dourado"
                    ]
                },
                {
                    resposta: "ANTECESSOR",
                    dicas: [
                        "Sou aquele que vem antes",
                        "Expresso ordem",
                        "Sou o 27 do 28",
                        "Sou o n√∫mero anterior",
                        "Falam que sou ancestral",
                        "Na reta num√©rica estou a esquerda do n√∫mero analisado",
                        "Sou 'ex' do atual",
                        "Sou estudado na pr√©-escola"
                    ]
                },
                {
                    resposta: "SUCESSOR",
                    dicas: [
                        "Sou o pr√≥ximo n√∫mero",
                        "Falam que sou herdeiro",
                        "Sou estudado na pr√©-escola",
                        "Sou 'p√≥s' do atual",
                        "Sou aquele que vem depois",
                        "Expresso ordem",
                        "Sou o 32 do 31",
                        "Na reta num√©rica estou a direita do n√∫mero analisado"
                    ]
                },
                {
                    resposta: "ORDEM CRESCENTE",
                    dicas: [
                        "Eu cres√ßo",
                        "Sou fase da lua",
                        "Aumento gradativamente",
                        "Coloco em ordem",
                        "Sou progressivo",
                        "(25, 30, 35, 40, 45)",
                        "Represento ordem",
                        "Sou crescimento"
                    ]
                },
                {
                    resposta: "ORDEM DECRESCENTE",
                    dicas: [
                        "Coloco em ordem",
                        "(80, 70, 60, 50, 40, 30)",
                        "Represento ordem",
                        "Na lua sou minguante",
                        "Eu diminuo",
                        "Diminuo gradativamente",
                        "Sou retr√≥grado",
                        "Sou do maior para o menor"
                    ]
                },
                {
                    resposta: "DOBRO",
                    dicas: [
                        "N√£o sou triplo",
                        "Sou numeral multiplicativo",
                        "Sou multiplica√ß√£o",
                        "M√∫ltiplo de 2",
                        "Sou uma rela√ß√£o por 2",
                        "Duas vezes a mesma quantidade",
                        "Quantidade maior",
                        "Jo√£o tem 10 e Maria 5"
                    ]
                },
                {
                    resposta: "TRIPLO",
                    dicas: [
                        "Sou uma rela√ß√£o por 3",
                        "N√£o sou dobro",
                        "M√∫ltiplo por 3",
                        "Sou multiplica√ß√£o",
                        "Quantidade maior",
                        "Sou numeral multiplicativo",
                        "Bruno tem 27 e Lucas 9",
                        "Tr√™s vezes a mesma quantidade"
                    ]
                },
                {
                    resposta: "METADE",
                    dicas: [
                        "Represento ¬Ω",
                        "Oposto de dobro",
                        "Por√ß√£o igual a uma outra, obtida pela divis√£o de um todo",
                        "De 12 eu sou o 6",
                        "Muitos me chamam de 'meia' (Meia hora, meia d√∫zia)",
                        "Represento 5/10",
                        "Sou o raio do di√¢metro",
                        "De 30 eu sou 15"
                    ]
                },
                {
                    resposta: "M√ìDULO",
                    dicas: [
                        "Posso ser magnitude",
                        "Sou valor real",
                        "Desconsidero o sinal",
                        "Sou sempre positivo",
                        "Sou valor absoluto",
                        "Sou valor num√©rico",
                        "N√£o sou negativo",
                        "Posso ser a dist√¢ncia de um ponto at√© a origem"
                    ]
                }
            ],

            algebra: [
                {
                    resposta: "ADI√á√ÉO",
                    dicas: [
                        "Sou contar",
                        "Me chamam de 'mais'",
                        "Oposto de subtra√ß√£o",
                        "Me chamam de 'soma'",
                        "Elemento neutro √© zero",
                        "56 + 72 = 128",
                        "Sou uma opera√ß√£o matem√°tica",
                        "Matem√°tica b√°sica"
                    ]
                },
                {
                    resposta: "SUBTRA√á√ÉO",
                    dicas: [
                        "Um s√≠mbolo me representa",
                        "Sou da matem√°tica b√°sica",
                        "Sou menos",
                        "Tenho minuendo",
                        "Eu tiro uma quantidade",
                        "Tenho subtraendo",
                        "Sou uma opera√ß√£o b√°sica",
                        "Minha resposta √© o resto"
                    ]
                },
                {
                    resposta: "MULTIPLICA√á√ÉO",
                    dicas: [
                        "Sou um tipo de conta",
                        "Me chamam de 'vezes'",
                        "Oposto de divis√£o",
                        "(x) me representa",
                        "(¬∑) me representa",
                        "5 x 10 = 50",
                        "Sou uma opera√ß√£o matem√°tica",
                        "Estou na matem√°tica b√°sica e aplicada"
                    ]
                },
                {
                    resposta: "DIVIS√ÉO",
                    dicas: [
                        "Sou opera√ß√£o fundamental",
                        "N√£o sou multiplica√ß√£o",
                        "Sou fra√ß√£o",
                        "N√£o sou subtra√ß√£o",
                        "Meu oposto √© multiplica√ß√£o",
                        "N√£o sou adi√ß√£o",
                        "Tenho divisor",
                        "Tenho dividendo"
                    ]
                },
                {
                    resposta: "VETOR",
                    dicas: [
                        "Represento for√ßa",
                        "Elemento da geometria anal√≠tica",
                        "Segmento de reta orientado",
                        "Estou na f√≠sica",
                        "Estou na matem√°tica",
                        "Represento m√≥dulo, dire√ß√£o e sentido",
                        "Sou uma grandeza vetorial",
                        "Uma seta me representa"
                    ]
                },
                {
                    resposta: "MATRIZ",
                    dicas: [
                        "Sou do tipo A m x n",
                        "Letra mai√∫scula me representa",
                        "Tenho linhas",
                        "Sou uma tabela organizada",
                        "Resolvo sistemas",
                        "m s√£o minhas linhas",
                        "Tenho colunas",
                        "n s√£o minhas colunas"
                    ]
                },
                {
                    resposta: "SISTEMA",
                    dicas: [
                        "Posso ser de equa√ß√µes",
                        "Posso ser um grupo de medidas",
                        "Sou um grupo espec√≠fico",
                        "Sou o resultado da jun√ß√£o de elementos",
                        "Na equa√ß√£o posso ser escrito em chaves",
                        "Sou um conjunto de elementos",
                        "Posso ser concreto ou abstrato",
                        "Alguns lutam contra mim"
                    ]
                },
                {
                    resposta: "MAIS",
                    dicas: [
                        "Eu somo",
                        "Posso ser representado por um sinal",
                        "Estou no portugu√™s",
                        "Sou adi√ß√£o",
                        "Sin√¥nimo de excesso",
                        "Maior do que era",
                        "Sou oposto de menos",
                        "Sou diferente de mas"
                    ]
                },
                {
                    resposta: "MENOS",
                    dicas: [
                        "Sou subtra√ß√£o",
                        "Eu tiro",
                        "Sou oposto de mais",
                        "Expresso quantidade",
                        "Posso ser representado por um sinal",
                        "Quantidade menor que outra",
                        "Eu subtraio",
                        "Intensidade reduzida"
                    ]
                },
                {
                    resposta: "IGUALDADE",
                    dicas: [
                        "Sou representado por um s√≠mbolo",
                        "Sou uma rela√ß√£o",
                        "'4 x 5 = 2 x 10'",
                        "Mostro que o resultado √© igual a opera√ß√£o",
                        "Estou nas opera√ß√µes",
                        "'=' me representa",
                        "'x = y' logo x e y tem uma rela√ß√£o de igualdade",
                        "Sou oposto de diferente"
                    ]
                },
                {
                    resposta: "SINAL",
                    dicas: [
                        "Posso ser soma (+)",
                        "Posso ser igualdade (=)",
                        "Posso ser divis√£o (√∑) e (/)",
                        "Posso ser (.), (*) ou (x)",
                        "Sou s√≠mbolo da matem√°tica",
                        "Posso ser porcentagem (%)",
                        "Posso ser subtra√ß√£o (-)",
                        "Posso ser dinheiro ($)"
                    ]
                },
                {
                    resposta: "VALOR",
                    dicas: [
                        "'Vale o valor de x'",
                        "Posso ser absoluto",
                        "Sou a quantidade do n√∫mero",
                        "Posso ser determinado pela resolu√ß√£o do problema",
                        "Posso ser relativo",
                        "Em vista de seu colecion√°vel",
                        "No concreto eu sou fixo",
                        "Represento import√¢ncia num√©rica"
                    ]
                },
                {
                    resposta: "VARI√ÅVEL",
                    dicas: [
                        "Sou representada por letras",
                        "Meu valor pode mudar",
                        "Estou nas equa√ß√µes",
                        "Sou inc√≥gnita",
                        "Posso ser x, y, z",
                        "Sou elemento fundamental da √°lgebra",
                        "Represento quantidades desconhecidas",
                        "Me estudo com constantes"
                    ]
                },
                {
                    resposta: "EQUA√á√ÉO",
                    dicas: [
                        "Tenho igualdade",
                        "Possuo inc√≥gnitas",
                        "Busco solu√ß√£o",
                        "Sou uma express√£o matem√°tica",
                        "Posso ser do 1¬∫ grau",
                        "Posso ser do 2¬∫ grau",
                        "Resolvo problemas",
                        "Tenho membros e termos"
                    ]
                },
                {
                    resposta: "EXPRESS√ÉO",
                    dicas: [
                        "Sou combina√ß√£o de n√∫meros e opera√ß√µes",
                        "Posso ser num√©rica",
                        "Posso ser alg√©brica",
                        "Tenho valor calcul√°vel",
                        "Sou sequ√™ncia de opera√ß√µes",
                        "Posso conter vari√°veis",
                        "Sou fundamental na matem√°tica",
                        "Preciso ser simplificada"
                    ]
                },
                {
                    resposta: "FUN√á√ÉO",
                    dicas: [
                        "Relaciono conjuntos",
                        "Tenho dom√≠nio e contradom√≠nio",
                        "Posso ser afim",
                        "Posso ser quadr√°tica",
                        "Sou regra de associa√ß√£o",
                        "Cada x tem um y",
                        "Represento rela√ß√µes",
                        "Me estudo com gr√°ficos"
                    ]
                },
                {
                    resposta: "POT√äNCIA",
                    dicas: [
                        "Sou multiplica√ß√£o repetida",
                        "Tenho base e expoente",
                        "2¬≥ = 8",
                        "Sou nota√ß√£o cient√≠fica",
                        "Simplifico multiplica√ß√µes",
                        "Posso ser quadrado ou cubo",
                        "Tenho propriedades espec√≠ficas",
                        "Sou fundamental na √°lgebra"
                    ]
                },
                {
                    resposta: "RAIZ",
                    dicas: [
                        "Sou opera√ß√£o inversa da pot√™ncia",
                        "‚àö4 = 2",
                        "Posso ser quadrada",
                        "Posso ser c√∫bica",
                        "Encontro o n√∫mero original",
                        "Sou radicia√ß√£o",
                        "Tenho radical e √≠ndice",
                        "Simplifico express√µes"
                    ]
                },
                {
                    resposta: "LOGARITMO",
                    dicas: [
                        "Sou expoente de uma eleva√ß√£o",
                        "Sou uma express√£o",
                        "Posso ser representado por uma sigla",
                        "'1000 na base 10 √© 3'",
                        "Minha fun√ß√£o inversa √© a fun√ß√£o exponencial",
                        "Posso ser comum (base 10)",
                        "Posso ser neperiano",
                        "Sou uma opera√ß√£o matem√°tica diretamente relacionada com as equa√ß√µes exponenciais"
                    ]
                },
                {
                    resposta: "POLIN√îMIO",
                    dicas: [
                        "Sou express√£o com v√°rios termos",
                        "Tenho coeficientes e vari√°veis",
                        "Posso ser do 1¬∫ grau, 2¬∫ grau, etc",
                        "ax¬≤ + bx + c √© meu formato cl√°ssico",
                        "Sou fundamental na √°lgebra",
                        "Tenho ra√≠zes",
                        "Posso ser fatorado",
                        "Represento fun√ß√µes matem√°ticas"
                    ]
                }
            ],

            geometria: [
                {
                    resposta: "TRI√ÇNGULO",
                    dicas: [
                        "Sou uma forma geom√©trica",
                        "Tenho 3 lados",
                        "Tenho 3 √¢ngulos internos",
                        "Posso ser equil√°tero",
                        "Pode ser usado a¬≤ + b¬≤ = c¬≤ em mim",
                        "Tenho 2 catetos",
                        "Posso ter uma hipotenusa",
                        "A soma dos meus √¢ngulos internos √© sempre 180¬∞"
                    ]
                },
                {
                    resposta: "C√çRCULO",
                    dicas: [
                        "Meu contorno √© uma circunfer√™ncia",
                        "Existem v√°rias cordas em mim",
                        "N√£o tenho v√©rtices",
                        "Tenho di√¢metro",
                        "Sou uma forma geom√©trica",
                        "Tenho raio",
                        "N√£o tenho lados",
                        "N√£o sou pol√≠gono"
                    ]
                },
                {
                    resposta: "QUADRADO",
                    dicas: [
                        "Tenho 4 lados iguais",
                        "Todos meus √¢ngulos s√£o 90¬∞",
                        "Sou um ret√¢ngulo especial",
                        "Minha √°rea √© lado √ó lado",
                        "Sou um pol√≠gono regular",
                        "Tenho 4 eixos de simetria",
                        "Minha diagonal divide meus √¢ngulos ao meio",
                        "Sou caso particular do losango"
                    ]
                },
                {
                    resposta: "RET√ÇNGULO",
                    dicas: [
                        "Lados opostos paralelos",
                        "Lado x altura calcula minha √°rea",
                        "Tenho 4 √¢ngulos de 90¬∞",
                        "Sou uma forma geom√©trica",
                        "A soma dos meus √¢ngulos internos √© sempre 360¬∞",
                        "Sou um quadril√°tero",
                        "Sou um pol√≠gono",
                        "Tenho 4 lados"
                    ]
                },
                {
                    resposta: "ESFERA",
                    dicas: [
                        "Sou parecida com planetas",
                        "Sou um s√≥lido geom√©trico",
                        "Sou a forma da laranja",
                        "Sou da geometria espacial",
                        "Sou obtido pela rota√ß√£o do semic√≠rculo",
                        "Todos os pontos est√£o equidistantes do centro",
                        "Sou uma figura 3D sim√©trica",
                        "Tenho volume"
                    ]
                },
                {
                    resposta: "CUBO",
                    dicas: [
                        "Sou uma figura espacial",
                        "Minhas faces s√£o quadradas",
                        "Sou um poliedro",
                        "Sou composto por 6 faces",
                        "Sou um s√≥lido geom√©trico",
                        "Me chamam de dado",
                        "Tenho volume",
                        "Sou regular"
                    ]
                },
                {
                    resposta: "PIR√ÇMIDE",
                    dicas: [
                        "Sou uma figura espacial",
                        "Minha base pode ter muitas formas",
                        "Sou um poliedro",
                        "Sou composta por uma base e um v√©rtice",
                        "Sou um s√≥lido geom√©trico",
                        "Tenho pol√≠gonos",
                        "Tenho volume",
                        "Estou no Egito"
                    ]
                },
                {
                    resposta: "CILINDRO",
                    dicas: [
                        "Tenho dois planos paralelos",
                        "Posso ser reto",
                        "Sou tridimensional",
                        "Sou uma figura geom√©trica",
                        "Minhas bases s√£o c√≠rculos",
                        "Sou formado por pol√≠gonos",
                        "Sou um poliedro",
                        "Posso ser obl√≠quo"
                    ]
                },
                {
                    resposta: "HEX√ÅGONO",
                    dicas: [
                        "Sou um pol√≠gono",
                        "Posso ser regular",
                        "Tenho 6 lados",
                        "Tra√ßando retas pelos meus v√©rtices formo tri√¢ngulos",
                        "Sou uma forma geom√©trica",
                        "Posso ser irregular",
                        "A soma dos meus √¢ngulos internos √© sempre 720¬∞",
                        "Sou da geometria plana"
                    ]
                },
                {
                    resposta: "PENT√ÅGONO",
                    dicas: [
                        "Sou um grupo de pol√≠gonos",
                        "Minha forma tem 5 lados",
                        "Posso ser regular",
                        "(per√≠metro x ap√≥tema) / 2 calcula minha √°rea",
                        "Tenho 5 v√©rtices",
                        "Posso ser irregular",
                        "Sou um grupo de formas geom√©tricas",
                        "Sou s√≠mbolo de seguran√ßa nos EUA"
                    ]
                },
                {
                    resposta: "POL√çGONO",
                    dicas: [
                        "Sou uma figura fechada",
                        "Sou limitado por retas",
                        "Posso ser convexo",
                        "Posso ter muitos lados",
                        "Estou no plano",
                        "Posso ter muitos √¢ngulos",
                        "Tenho v√©rtices",
                        "Posso ser c√¥ncavo"
                    ]
                },
                {
                    resposta: "OCT√ìGONO",
                    dicas: [
                        "Sou uma figura 2D",
                        "Possuo 8 lados",
                        "Estou na geometria plana",
                        "Posso ser regular",
                        "Sou um pol√≠gono",
                        "A soma dos meus √¢ngulos internos √© 1080¬∞",
                        "Posso ser irregular",
                        "Tenho v√©rtices e arestas"
                    ]
                },
                {
                    resposta: "HEPT√ÅGONO",
                    dicas: [
                        "Tenho v√©rtices e arestas",
                        "Sou um pol√≠gono",
                        "Posso ser c√¥ncavo ou convexo",
                        "Posso ser irregular",
                        "Estou na geometria plana",
                        "Tenho 7 lados",
                        "A soma dos meus √¢ngulos internos √© 900¬∞",
                        "Posso ser regular"
                    ]
                },
                {
                    resposta: "PER√çMETRO",
                    dicas: [
                        "Sou a linha em volta da figura",
                        "Sou soma do contorno",
                        "Posso medir figuras",
                        "Sou a soma dos lados",
                        "A linha que delimita regi√µes",
                        "Medir ao redor do lugar",
                        "Em um quadrado de lados 2, eu sou 8",
                        "Em um tri√¢ngulo 3,6,5 eu sou 14"
                    ]
                },
                {
                    resposta: "√ÅREA",
                    dicas: [
                        "Sin√¥nimo de campo estudado",
                        "Sou da geometria plana",
                        "Posso ser cm¬≤",
                        "Posso ser m¬≤",
                        "Sou um conceito matem√°tico",
                        "Existem v√°rias unidades para me medir",
                        "Sou a superf√≠cie",
                        "Sou quantidade de espa√ßo"
                    ]
                },
                {
                    resposta: "PLANO",
                    dicas: [
                        "Na geografia sou relevo",
                        "Sou uma no√ß√£o primitiva da geometria",
                        "Dois pontos temos uma reta e a reta est√° em mim",
                        "Sou representado por letras gregas",
                        "Tenho duas dimens√µes",
                        "Sou infinito",
                        "N√£o sou desnivelado",
                        "Sou superf√≠cie lisa"
                    ]
                },
                {
                    resposta: "EIXO",
                    dicas: [
                        "Estou no plano cartesiano",
                        "Sou as linhas principais de refer√™ncia",
                        "Sou linha reta",
                        "Posso ser ordenada",
                        "Posso ser abscissa",
                        "Posso ser horizontal",
                        "O encontro na origem √© refer√™ncia",
                        "Posso ser vertical"
                    ]
                },
                {
                    resposta: "PLANO CARTESIANO",
                    dicas: [
                        "Tenho coordenadas",
                        "Tenho origem",
                        "Tenho abscissa",
                        "Sou composto por duas retas perpendiculares",
                        "Tenho ordenada",
                        "Tenho x e y",
                        "Formo gr√°ficos",
                        "Ren√© Descartes me criou"
                    ]
                },
                {
                    resposta: "POLIEDRO",
                    dicas: [
                        "Tenho profundidade",
                        "Sou composto de pol√≠gonos",
                        "Sou figuras tridimensionais",
                        "Tenho volume",
                        "Sou um grupo de formas",
                        "Tenho v√©rtices",
                        "Sou objeto da geometria espacial",
                        "Tenho faces"
                    ]
                },
                {
                    resposta: "V√âRTICE",
                    dicas: [
                        "Ponto de encontro de retas",
                        "Posso ser chamado de canto",
                        "Sou cantos dos poliedros",
                        "Ponto de encontro de curvas",
                        "Sou encontro de arestas",
                        "Sou a origem do √¢ngulo",
                        "Posso ser chamado de bico",
                        "Sou cantos dos pol√≠gonos"
                    ]
                }
            ],

            trigonometria: [
                {
                    resposta: "SENO",
                    dicas: [
                        "N√£o sou cosseno",
                        "Estou na trigonometria",
                        "Estou nas rela√ß√µes trigonom√©tricas",
                        "No c√≠rculo trigonom√©trico estou no eixo y",
                        "Sou cateto oposto sobre hipotenusa",
                        "Sou uma raz√£o trigonom√©trica",
                        "Posso ser uma fun√ß√£o",
                        "Estudo os √¢ngulos"
                    ]
                },
                {
                    resposta: "COSSENO",
                    dicas: [
                        "Meu quadrado + quadrado do seno √© igual a 1",
                        "Meu inverso √© secante",
                        "Sou cateto adjacente sobre hipotenusa",
                        "Sou raz√£o trigonom√©trica",
                        "Estou na trigonometria",
                        "Sou estudo dos √¢ngulos",
                        "Posso ser uma fun√ß√£o",
                        "Sou rela√ß√£o de cateto adjacente, √¢ngulo e hipotenusa"
                    ]
                },
                {
                    resposta: "TANGENTE",
                    dicas: [
                        "Toco em apenas um ponto",
                        "Sou uma reta",
                        "N√£o sou seno",
                        "Sou uma raz√£o trigonom√©trica",
                        "Sou seno/cosseno",
                        "Sou cateto oposto sobre cateto adjacente",
                        "N√£o sou cosseno",
                        "Minha inversa √© cotangente"
                    ]
                },
                {
                    resposta: "HIPOTENUSA",
                    dicas: [
                        "Estou na f√≥rmula a¬≤ = b¬≤ + c¬≤",
                        "Estou no tri√¢ngulo ret√¢ngulo",
                        "Pit√°goras me estudou",
                        "Sou o maior lado de um tri√¢ngulo ret√¢ngulo",
                        "Sou a maior dist√¢ncia entre dois v√©rtices",
                        "Ligo os catetos",
                        "Estou no Teorema de Pit√°goras",
                        "Sou lado oposto do √¢ngulo de 90¬∞"
                    ]
                },
                {
                    resposta: "SECANTE",
                    dicas: [
                        "Sou o inverso do cosseno",
                        "Sou raz√£o do √¢ngulo entre hipotenusa e cateto adjacente",
                        "Estou na trigonometria",
                        "Sou uma reta",
                        "Sou a dist√¢ncia da origem √† reta que toca a circunfer√™ncia",
                        "Sou hipotenusa sobre cateto adjacente",
                        "Sou uma fun√ß√£o trigonom√©trica",
                        "Meu s√≠mbolo √© sec"
                    ]
                },
                {
                    resposta: "COSSECANTE",
                    dicas: [
                        "Sou o inverso do seno",
                        "Sou hipotenusa sobre cateto oposto",
                        "Estou na trigonometria",
                        "Sou uma fun√ß√£o trigonom√©trica",
                        "Meu s√≠mbolo √© csc",
                        "Sou raz√£o trigonom√©trica",
                        "Valores meus s√£o sempre ‚â• 1 ou ‚â§ -1",
                        "Completo as fun√ß√µes trigonom√©tricas"
                    ]
                },
                {
                    resposta: "COTANGENTE",
                    dicas: [
                        "Sou o inverso da tangente",
                        "Sou cosseno sobre seno",
                        "Sou cateto adjacente sobre cateto oposto",
                        "Estou na trigonometria",
                        "Sou uma fun√ß√£o trigonom√©trica",
                        "Meu s√≠mbolo √© cot",
                        "Sou raz√£o trigonom√©trica",
                        "Completo as seis fun√ß√µes trigonom√©tricas"
                    ]
                },
                {
                    resposta: "ARCO",
                    dicas: [
                        "Sou uma parte da circunfer√™ncia",
                        "Tenho medida angular",
                        "Posso ser medido em graus ou radianos",
                        "Sou fundamental na trigonometria",
                        "Defino as fun√ß√µes trigonom√©tricas",
                        "Posso ser maior ou menor",
                        "Tenho comprimento",
                        "Relaciono √¢ngulos e circunfer√™ncias"
                    ]
                },
                {
                    resposta: "RADIANO",
                    dicas: [
                        "Sou unidade de medida angular",
                        "180¬∞ = œÄ radianos",
                        "Sou mais usado em c√°lculo",
                        "Relaciono comprimento do arco com o raio",
                        "Sou adimensional",
                        "Sou padr√£o no sistema internacional",
                        "Simplifico f√≥rmulas trigonom√©tricas",
                        "360¬∞ = 2œÄ radianos"
                    ]
                },
                {
                    resposta: "C√çRCULO TRIGONOM√âTRICO",
                    dicas: [
                        "Tenho raio 1",
                        "Centro na origem (0,0)",
                        "Defino todas as fun√ß√µes trigonom√©tricas",
                        "Sou fundamental para entender seno e cosseno",
                        "Dividido em 4 quadrantes",
                        "√Çngulos s√£o medidos a partir do eixo x",
                        "Coordenadas dos pontos s√£o (cos Œ∏, sen Œ∏)",
                        "Sou base da trigonometria anal√≠tica"
                    ]
                },
                {
                    resposta: "QUADRANTE",
                    dicas: [
                        "Divido o plano cartesiano",
                        "Sou uma das quatro partes",
                        "Primeiro quadrante: x>0, y>0",
                        "Segundo quadrante: x<0, y>0",
                        "Terceiro quadrante: x<0, y<0",
                        "Quarto quadrante: x>0, y<0",
                        "Determino sinais das fun√ß√µes trigonom√©tricas",
                        "Sou fundamental na localiza√ß√£o angular"
                    ]
                },
                {
                    resposta: "IDENTIDADE TRIGONOM√âTRICA",
                    dicas: [
                        "Sou uma igualdade verdadeira para todos os valores",
                        "sen¬≤Œ∏ + cos¬≤Œ∏ = 1 √© meu exemplo mais famoso",
                        "Simplifico express√µes",
                        "Resolvo equa√ß√µes trigonom√©tricas",
                        "Tenho v√°rias formas diferentes",
                        "Sou fundamental em c√°lculos avan√ßados",
                        "Relaciono diferentes fun√ß√µes trigonom√©tricas",
                        "Provas matem√°ticas me utilizam"
                    ]
                },
                {
                    resposta: "√ÇNGULO",
                    dicas: [
                        "Sou abertura entre duas retas",
                        "Posso ser agudo, reto ou obtuso",
                        "Medido em graus ou radianos",
                        "Sou fundamental na trigonometria",
                        "Defino as raz√µes trigonom√©tricas",
                        "Tenho v√©rtice e lados",
                        "Posso ser complementar ou suplementar",
                        "Sou objeto de estudo geom√©trico"
                    ]
                },
                {
                    resposta: "CATETO",
                    dicas: [
                        "Estou no tri√¢ngulo ret√¢ngulo",
                        "Formo o √¢ngulo de 90¬∞",
                        "Sou menor que a hipotenusa",
                        "Posso ser oposto ou adjacente",
                        "Relaciono-me com as raz√µes trigonom√©tricas",
                        "Sou fundamental no Teorema de Pit√°goras",
                        "Dois de mim formam o √¢ngulo reto",
                        "Sou lado do tri√¢ngulo ret√¢ngulo"
                    ]
                },
                {
                    resposta: "TEOREMA DE PIT√ÅGORAS",
                    dicas: [
                        "a¬≤ + b¬≤ = c¬≤",
                        "Relaciono lados do tri√¢ngulo ret√¢ngulo",
                        "Sou fundamental na geometria",
                        "Calculo dist√¢ncias",
                        "Provas me utilizam extensivamente",
                        "Aplico-se apenas a tri√¢ngulos ret√¢ngulos",
                        "Sou um dos teoremas mais famosos",
                        "Conhe√ßo-me desde a antiguidade"
                    ]
                },
                {
                    resposta: "FUN√á√ÉO PERI√ìDICA",
                    dicas: [
                        "Repito meus valores em intervals regulares",
                        "Seno e cosseno s√£o meus exemplos cl√°ssicos",
                        "Tenho per√≠odo definido",
                        "Sou fundamental em fen√¥menos oscilat√≥rios",
                        "Represento movimentos repetitivos",
                        "Gr√°ficos meus s√£o ondulat√≥rios",
                        "Sou estudada na trigonometria",
                        "Aplico-me em f√≠sica e engenharia"
                    ]
                },
                {
                    resposta: "AMPLITUDE",
                    dicas: [
                        "Sou a altura m√°xima de uma onda",
                        "Em fun√ß√µes trigonom√©tricas, sou o valor m√°ximo",
                        "Medio a intensidade de oscila√ß√µes",
                        "Sou metade da diferen√ßa entre m√°ximo e m√≠nimo",
                        "Importante em fen√¥menos ondulat√≥rios",
                        "Relaciono-me com energia",
                        "Sou par√¢metro de fun√ß√µes seno e cosseno",
                        "Determino a varia√ß√£o vertical"
                    ]
                },
                {
                    resposta: "PER√çODO",
                    dicas: [
                        "Sou o intervalo de repeti√ß√£o",
                        "Para seno e cosseno sou 2œÄ radianos",
                        "Medio o tempo de um ciclo completo",
                        "Sou o comprimento de um ciclo",
                        "Inverso da frequ√™ncia",
                        "Sou fundamental em fun√ß√µes peri√≥dicas",
                        "Determino quando a fun√ß√£o se repete",
                        "Sou medida em unidades de tempo ou √¢ngulo"
                    ]
                },
                {
                    resposta: "FASE",
                    dicas: [
                        "Determino o deslocamento horizontal",
                        "Sou o √¢ngulo inicial em fun√ß√µes trigonom√©tricas",
                        "Desloco o gr√°fico para esquerda ou direita",
                        "Afeto o ponto de in√≠cio do ciclo",
                        "Sou par√¢metro em sen(Œ∏ + œÜ)",
                        "Importante em an√°lise de ondas",
                        "Relaciono diferentes fun√ß√µes oscilat√≥rias",
                        "Sou medida em radianos ou graus"
                    ]
                }
            ],

            historia: [
                {
                    resposta: "EUCLIDES",
                    dicas: [
                        "Sou o matem√°tico da Geometria Euclidiana",
                        "Sou pai da geometria",
                        "Dei aula em Alexandria",
                        "Tenho postulados",
                        "Sou uma pessoa hist√≥rica",
                        "J√° morri",
                        "Sou de Alexandria",
                        "Sou um matem√°tico grego"
                    ]
                },
                {
                    resposta: "PIT√ÅGORAS",
                    dicas: [
                        "Tenho um teorema famoso",
                        "Sou grego",
                        "Meu teorema envolve tri√¢ngulos ret√¢ngulos",
                        "Fundei uma escola",
                        "Acredito que 'tudo √© n√∫mero'",
                        "Meu teorema: a¬≤ + b¬≤ = c¬≤",
                        "Sou fil√≥sofo e matem√°tico",
                        "Minha escola era secreta"
                    ]
                },
                {
                    resposta: "ARQUIMEDES",
                    dicas: [
                        "Fiz experimentos com coroa de ouro",
                        "J√° morri",
                        "Projetei armas para guerra",
                        "Sou de Siracusa",
                        "Descobri princ√≠pios de alavanca",
                        "Sou da Antiguidade Cl√°ssica",
                        "Sou um matem√°tico grego",
                        "Gritei 'Eureka!'"
                    ]
                },
                {
                    resposta: "TALES",
                    dicas: [
                        "Tenho um teorema de proporcionalidade",
                        "Sou matem√°tico",
                        "Sou um dos 7 s√°bios da Gr√©cia Antiga",
                        "Nasci em Mileto",
                        "Tenho um teorema sobre tri√¢ngulos",
                        "J√° morri",
                        "Predi um eclipse solar",
                        "Sou considerado o primeiro fil√≥sofo"
                    ]
                },
                {
                    resposta: "NEWTON",
                    dicas: [
                        "Desenvolvi o c√°lculo infinitesimal",
                        "Sou f√≠sico e matem√°tico",
                        "Leis do movimento",
                        "Lei da gravita√ß√£o universal",
                        "Sou ingl√™s",
                        "Vivi no s√©culo XVII",
                        "Discuti com Leibniz sobre o c√°lculo",
                        "Trabalhei com √≥ptica"
                    ]
                },
                {
                    resposta: "LEIBNIZ",
                    dicas: [
                        "Desenvolvi o c√°lculo independentemente",
                        "Sou fil√≥sofo e matem√°tico",
                        "Nota√ß√£o moderna do c√°lculo √© minha",
                        "Sou alem√£o",
                        "Inventor da nota√ß√£o dy/dx",
                        "Discuti com Newton sobre prioridade",
                        "Trabalhei com sistema bin√°rio",
                        "Contribu√≠ para a l√≥gica matem√°tica"
                    ]
                },
                {
                    resposta: "GAUSS",
                    dicas: [
                        "Sou o 'pr√≠ncipe dos matem√°ticos'",
                        "Desenvolvi a teoria dos n√∫meros",
                        "Sou alem√£o",
                        "Trabalhei com astronomia",
                        "M√©todo de elimina√ß√£o gaussiana",
                        "Distribui√ß√£o normal gaussiana",
                        "S√©culo XVIII-XIX",
                        "Contribu√≠ para geometria diferencial"
                    ]
                },
                {
                    resposta: "EULER",
                    dicas: [
                        "Introduzi a nota√ß√£o f(x)",
                        "Sou su√≠√ßo",
                        "N√∫mero e leva meu nome",
                        "F√≥rmula e^(iœÄ) + 1 = 0",
                        "Cego na velhice, continuei trabalhando",
                        "Contribu√≠ para todos os ramos da matem√°tica",
                        "S√©culo XVIII",
                        "Trabalhei em S√£o Petersburgo e Berlim"
                    ]
                },
                {
                    resposta: "FIBONACCI",
                    dicas: [
                        "Sequ√™ncia que leva meu nome: 1,1,2,3,5,8,...",
                        "Sou italiano",
                        "Introduzi os algarismos ar√°bicos na Europa",
                        "Livro Liber Abaci",
                        "S√©culo XII-XIII",
                        "Problema dos coelhos",
                        "Raz√£o √°urea aparece na minha sequ√™ncia",
                        "Mercador e matem√°tico"
                    ]
                },
                {
                    resposta: "DESCARTES",
                    dicas: [
                        "Penso, logo existo",
                        "Sou franc√™s",
                        "Sistema de coordenadas cartesianas",
                        "Fil√≥sofo e matem√°tico",
                        "S√©culo XVII",
                        "Geometria anal√≠tica",
                        "M√©todo cartesiano",
                        "Trabalhei com √°lgebra e geometria"
                    ]
                },
                {
                    resposta: "FERMAT",
                    dicas: [
                        "√öltimo Teorema que levou 358 anos para provar",
                        "Sou franc√™s",
                        "Trabalhei com teoria dos n√∫meros",
                        "Princ√≠pio do tempo m√≠nimo em √≥ptica",
                        "Advogado e matem√°tico amador",
                        "S√©culo XVII",
                        "Pequeno Teorema de Fermat",
                        "M√©todo para encontrar m√°ximos e m√≠nimos"
                    ]
                },
                {
                    resposta: "GALOIS",
                    dicas: [
                        "Teoria dos grupos leva meu nome",
                        "Morri em um duelo aos 20 anos",
                        "Sou franc√™s",
                        "Trabalhei com teoria das equa√ß√µes",
                        "Noite antes do duelo escrevi minhas ideias",
                        "S√©culo XIX",
                        "Grupos de Galois",
                        "Resolubilidade de equa√ß√µes por radicais"
                    ]
                },
                {
                    resposta: "CANTOR",
                    dicas: [
                        "Teoria dos conjuntos",
                        "Conjuntos infinitos",
                        "Sou alem√£o",
                        "N√∫meros transfinitos",
                        "Diagonaliza√ß√£o de Cantor",
                        "S√©culo XIX",
                        "Hip√≥tese do cont√≠nuo",
                        "Problemas mentais relacionados ao infinito"
                    ]
                },
                {
                    resposta: "HILBERT",
                    dicas: [
                        "23 problemas para o s√©culo XX",
                        "Sou alem√£o",
                        "Programa de Hilbert",
                        "Axiomatiza√ß√£o da geometria",
                        "S√©culo XIX-XX",
                        "Espa√ßo de Hilbert",
                        "Formalista em fundamentos da matem√°tica",
                        "Discurso 'Devemos saber, saberemos'"
                    ]
                },
                {
                    resposta: "RIEMANN",
                    dicas: [
                        "Hip√≥tese de Riemann (n√£o resolvida)",
                        "Sou alem√£o",
                        "Geometria riemanniana",
                        "Integral de Riemann",
                        "S√©culo XIX",
                        "Superf√≠cies de Riemann",
                        "Trabalhei com an√°lise complexa",
                        "Base para relatividade geral"
                    ]
                },
                {
                    resposta: "BOOLE",
                    dicas: [
                        "√Ålgebra booleana",
                        "Sou ingl√™s",
                        "L√≥gica matem√°tica",
                        "S√©culo XIX",
                        "Operadores AND, OR, NOT",
                        "Base para computa√ß√£o digital",
                        "Autodidata",
                        "Lei do pensamento"
                    ]
                },
                {
                    resposta: "TURING",
                    dicas: [
                        "M√°quina de Turing",
                        "Sou ingl√™s",
                        "Quebrei o c√≥digo Enigma",
                        "Pai da ci√™ncia da computa√ß√£o",
                        "Teste de Turing para IA",
                        "S√©culo XX",
                        "Morte tr√°gica por envenenamento",
                        "Trabalhei com morfog√™nese"
                    ]
                },
                {
                    resposta: "NOETHER",
                    dicas: [
                        "Teorema de Noether",
                        "Sou alem√£",
                        "√Ålgebra abstrata",
                        "An√©is e ideais",
                        "S√©culo XIX-XX",
                        "Simetria e leis de conserva√ß√£o",
                        "Primeira grande matem√°tica mulher",
                        "Leccionou em G√∂ttingen"
                    ]
                },
                {
                    resposta: "PASCAL",
                    dicas: [
                        "Tri√¢ngulo de Pascal",
                        "Sou franc√™s",
                        "Princ√≠pio de Pascal (hidr√°ulica)",
                        "Calculadora mec√¢nica (Pascaline)",
                        "S√©culo XVII",
                        "Probabilidade com Fermat",
                        "Apologista crist√£o",
                        "Trabalhei com cicl√≥ide"
                    ]
                },
                {
                    resposta: "LAGRANGE",
                    dicas: [
                        "Mec√¢nica lagrangiana",
                        "Sou franc√™s/italiano",
                        "Teoria dos n√∫meros",
                        "Multiplicadores de Lagrange",
                        "S√©culo XVIII",
                        "Trabalhei em an√°lise, √°lgebra e mec√¢nica",
                        "Membro da Academia de Ci√™ncias",
                        "Equa√ß√µes de Lagrange"
                    ]
                }
            ]
        };

        // Classe principal do MODO APRESENTA√á√ÉO
        class PerfilMatematicoApresentacao {
            constructor() {
                this.equipes = [];
                this.categoriaAtual = 'numeros';
                this.cartaAtual = null;
                this.dicaAtualIndex = 0;
                this.timeAtualIndex = 0;
                this.rodadaAtual = 1;
                this.totalRodadas = 10;
                this.cartasUsadas = {
                    numeros: [],
                    algebra: [],
                    geometria: [],
                    trigonometria: [],
                    historia: [],
                    aleatoria: []
                };
                this.cartasJogadas = 0;
                this.respostaRevelada = false;
                this.maxEquipes = 6;
                this.ultimaRespostaErrada = false;
                this.equipeEditando = null;
                this.sonsAtivos = true; // NOVO: Controle de sons
                this.audioContext = null; // NOVO: Contexto de √°udio
                
                this.inicializarElementos();
                this.configurarEventos();
                this.inicializarEquipesPadrao();
                this.inicializarSistemaDeSons(); // NOVO: Inicializar sons
                this.atualizarBotoesCategoriaModal();
            }

            // NOVO M√âTODO: Inicializar sistema de sons
            inicializarSistemaDeSons() {
                try {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    console.log('Sistema de sons inicializado com sucesso!');
                } catch (e) {
                    console.warn('AudioContext n√£o suportado:', e);
                    this.sonsAtivos = false;
                }
            }

            // NOVO M√âTODO: Tocar som personalizado
            tocarSom(tipo) {
                if (!this.sonsAtivos || !this.audioContext) return;

                try {
                    let frequencia, duracao, tipoOnda;

                    switch (tipo) {
                        case 'inicio':
                            // Som de abertura/vinheta (ascendente)
                            frequencia = 200;
                            duracao = 1.5;
                            tipoOnda = 'sine';
                            this.criarSomAscendente(frequencia, duracao, tipoOnda);
                            break;

                        case 'dica':
                            // Som suave de transi√ß√£o
                            frequencia = 800;
                            duracao = 0.3;
                            tipoOnda = 'triangle';
                            this.criarSomSimples(frequencia, duracao, tipoOnda);
                            break;

                        case 'acerto':
                            // Som de acerto/aplausos (fanfarra)
                            this.criarSomAcerto();
                            break;

                        case 'erro':
                            // Som de erro "Voc√™ Perdeu Ahh!" (descendente dram√°tico)
                            this.criarSomErro();
                            break;

                        case 'transferir':
                            // Som de passagem/troca
                            frequencia = 600;
                            duracao = 0.4;
                            tipoOnda = 'sawtooth';
                            this.criarSomSimples(frequencia, duracao, tipoOnda);
                            break;

                        case 'final':
                            // Fanfarra final/resultados
                            this.criarSomVitoria();
                            break;

                        case 'timer':
                            // Tic-tac crescente
                            frequencia = 1000;
                            duracao = 0.1;
                            tipoOnda = 'square';
                            this.criarSomSimples(frequencia, duracao, tipoOnda);
                            break;

                        case 'proxima_equipe':
                            // Som de transi√ß√£o suave
                            frequencia = 500;
                            duracao = 0.2;
                            tipoOnda = 'sine';
                            this.criarSomSimples(frequencia, duracao, tipoOnda);
                            break;
                    }
                } catch (e) {
                    console.warn('Erro ao tocar som:', e);
                }
            }

            // NOVO M√âTODO: Criar som simples
            criarSomSimples(freq, dur, tipoOnda) {
                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                
                oscillator.type = tipoOnda;
                oscillator.frequency.value = freq;
                
                gainNode.gain.setValueAtTime(0.3, this.audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + dur);
                
                oscillator.start(this.audioContext.currentTime);
                oscillator.stop(this.audioContext.currentTime + dur);
            }

            // NOVO M√âTODO: Criar som ascendente (in√≠cio)
            criarSomAscendente(freqInicial, dur, tipoOnda) {
                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                
                oscillator.type = tipoOnda;
                oscillator.frequency.setValueAtTime(freqInicial, this.audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(freqInicial * 4, this.audioContext.currentTime + dur);
                
                gainNode.gain.setValueAtTime(0.1, this.audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.5, this.audioContext.currentTime + dur/2);
                gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + dur);
                
                oscillator.start(this.audioContext.currentTime);
                oscillator.stop(this.audioContext.currentTime + dur);
            }

            // NOVO M√âTODO: Criar som de acerto (fanfarra)
            criarSomAcerto() {
                const notas = [523.25, 659.25, 783.99, 1046.50]; // C5, E5, G5, C6
                const tempo = 0.15;
                
                notas.forEach((freq, index) => {
                    setTimeout(() => {
                        const oscillator = this.audioContext.createOscillator();
                        const gainNode = this.audioContext.createGain();
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(this.audioContext.destination);
                        
                        oscillator.type = 'sine';
                        oscillator.frequency.value = freq;
                        
                        gainNode.gain.setValueAtTime(0.3, this.audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.3);
                        
                        oscillator.start(this.audioContext.currentTime);
                        oscillator.stop(this.audioContext.currentTime + 0.3);
                    }, index * tempo * 1000);
                });
            }

            // NOVO M√âTODO: Criar som de erro dram√°tico
            criarSomErro() {
                const oscillator = this.audioContext.createOscillator();
                const gainNode = this.audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(this.audioContext.destination);
                
                oscillator.type = 'sawtooth';
                oscillator.frequency.setValueAtTime(300, this.audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(50, this.audioContext.currentTime + 1);
                
                gainNode.gain.setValueAtTime(0.4, this.audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 1);
                
                oscillator.start(this.audioContext.currentTime);
                oscillator.stop(this.audioContext.currentTime + 1);
            }

            // NOVO M√âTODO: Criar som de vit√≥ria
            criarSomVitoria() {
                const notas = [523.25, 659.25, 783.99, 1046.50, 1318.51, 1567.98]; // Fanfarra
                const tempo = 0.2;
                
                notas.forEach((freq, index) => {
                    setTimeout(() => {
                        const oscillator = this.audioContext.createOscillator();
                        const gainNode = this.audioContext.createGain();
                        
                        oscillator.connect(gainNode);
                        gainNode.connect(this.audioContext.destination);
                        
                        oscillator.type = 'square';
                        oscillator.frequency.value = freq;
                        
                        gainNode.gain.setValueAtTime(0.2, this.audioContext.currentTime);
                        gainNode.gain.exponentialRampToValueAtTime(0.01, this.audioContext.currentTime + 0.4);
                        
                        oscillator.start(this.audioContext.currentTime);
                        oscillator.stop(this.audioContext.currentTime + 0.4);
                    }, index * tempo * 1000);
                });
            }

            // NOVO M√âTODO: Alternar estado dos sons
            alternarSons(ativar) {
                this.sonsAtivos = ativar;
                
                if (ativar && this.audioContext && this.audioContext.state === 'suspended') {
                    this.audioContext.resume();
                }
                
                this.atualizarBotoesSom();
                
                // Tocar som de confirma√ß√£o
                if (ativar) {
                    setTimeout(() => this.tocarSom('dica'), 100);
                }
            }

            // NOVO M√âTODO: Atualizar apar√™ncia dos bot√µes de som
            atualizarBotoesSom() {
                const btnAtivar = document.getElementById('btnAtivarSons');
                const btnDesativar = document.getElementById('btnDesativarSons');
                
                if (this.sonsAtivos) {
                    btnAtivar.classList.add('ativo');
                    btnDesativar.classList.remove('ativo');
                } else {
                    btnAtivar.classList.remove('ativo');
                    btnDesativar.classList.add('ativo');
                }
            }

            inicializarElementos() {
                // Telas e Modal
                this.telaConfiguracao = document.getElementById('telaConfiguracao');
                this.telaApresentacao = document.getElementById('telaApresentacao');
                this.telaResultadoFinal = document.getElementById('telaResultadoFinal');
                this.modalCategoria = document.getElementById('modalCategoria');
                this.modalEdicaoPlacar = document.getElementById('modalEdicaoPlacar');
                
                // Elementos de configura√ß√£o
                this.containerEquipes = document.getElementById('containerEquipes');
                this.selectCategoria = document.getElementById('selectCategoria');
                this.selectRodadas = document.getElementById('selectRodadas');
                this.btnIniciarApresentacao = document.getElementById('btnIniciarApresentacao');
                
                // Elementos do jogo
                this.tituloCarta = document.getElementById('tituloCarta');
                this.dicasContainer = document.getElementById('dicasContainer');
                this.listaPlacar = document.getElementById('listaPlacar');
                this.timeAtual = document.getElementById('timeAtual');
                
                // Elementos de resposta
                this.inputResposta = document.getElementById('inputResposta');
                this.btnTentarResposta = document.getElementById('btnTentarResposta');
                this.resultadoTentativa = document.getElementById('resultadoTentativa');
                this.respostaReveladaDiv = document.getElementById('respostaRevelada');
                this.respostaCorretaDiv = document.getElementById('respostaCorreta');
                
                // NOVOS ELEMENTOS - Indicador de Categoria
                this.categoriaIndicator = document.getElementById('categoriaIndicator');
                this.categoriaIcone = document.getElementById('categoriaIcone');
                this.categoriaNome = document.getElementById('categoriaNome');
                
                // Bot√µes de controle
                this.btnRevelarResposta = document.getElementById('btnRevelarResposta');
                this.btnProximaDica = document.getElementById('btnProximaDica');
                this.btnProximaCarta = document.getElementById('btnProximaCarta');
                this.btnTransferir = document.getElementById('btnTransferir');
                this.btnFinalizarJogo = document.getElementById('btnFinalizarJogo');
                this.btnNovoJogo = document.getElementById('btnNovoJogo');
                
                // NOVO BOT√ÉO: Transfer√™ncia Volunt√°ria
                this.btnTransferirVoluntariamente = document.getElementById('btnTransferirVoluntariamente');
                
                // NOVOS ELEMENTOS - Controles de Som
                this.btnAtivarSons = document.getElementById('btnAtivarSons');
                this.btnDesativarSons = document.getElementById('btnDesativarSons');
                
                // Elementos de Exporta√ß√£o
                this.btnExportarPDF = document.getElementById('btnExportarPDF');
                this.btnExportarExcel = document.getElementById('btnExportarExcel');
                
                // Elementos de Edi√ß√£o Placar
                this.infoEquipeEdicao = document.getElementById('infoEquipeEdicao');
                this.inputNovosPontos = document.getElementById('inputNovosPontos');
                this.btnConfirmarEdicao = document.getElementById('btnConfirmarEdicao');
                this.btnCancelarEdicao = document.getElementById('btnCancelarEdicao');
                
                // Modal
                this.btnFecharModal = document.getElementById('btnFecharModal');
                this.botoesCategoriaModal = document.querySelectorAll('.btn-categoria-modal');
            }

            configurarEventos() {
                this.btnIniciarApresentacao.addEventListener('click', () => this.iniciarJogo());
                this.btnTentarResposta.addEventListener('click', () => this.tentarResposta());
                this.btnRevelarResposta.addEventListener('click', () => this.revelarResposta());
                this.btnProximaDica.addEventListener('click', () => this.revelarProximaDica());
                this.btnProximaCarta.addEventListener('click', () => this.abrirModalCategoria());
                this.btnTransferir.addEventListener('click', () => this.transferirPergunta());
                this.btnFinalizarJogo.addEventListener('click', () => this.finalizarJogo());
                this.btnNovoJogo.addEventListener('click', () => this.novoJogo());
                
                // NOVO EVENTO: Transfer√™ncia Volunt√°ria
                this.btnTransferirVoluntariamente.addEventListener('click', () => this.transferirVoluntariamente());
                
                // NOVOS EVENTOS: Controles de Som
                this.btnAtivarSons.addEventListener('click', () => this.alternarSons(true));
                this.btnDesativarSons.addEventListener('click', () => this.alternarSons(false));
                
                // Eventos de Exporta√ß√£o
                this.btnExportarPDF.addEventListener('click', () => this.exportarPDF());
                this.btnExportarExcel.addEventListener('click', () => this.exportarExcel());
                
                // Eventos de Edi√ß√£o Placar
                this.btnConfirmarEdicao.addEventListener('click', () => this.confirmarEdicaoPlacar());
                this.btnCancelarEdicao.addEventListener('click', () => this.fecharModalEdicaoPlacar());

                // Modal events
                this.btnFecharModal.addEventListener('click', () => this.fecharModalCategoria());
                this.botoesCategoriaModal.forEach(btn => {
                    btn.addEventListener('click', (e) => this.selecionarCategoriaModal(e.target.dataset.categoria));
                });

                // Enter no input de resposta
                this.inputResposta.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.tentarResposta();
                });
            }

            // NOVO M√âTODO: Transfer√™ncia volunt√°ria
            transferirVoluntariamente() {
                this.tocarSom('transferir');
                this.proximoTime();
                this.limparAreaResposta();
                this.btnTransferir.style.display = 'none';
                this.ultimaRespostaErrada = false;
            }

            // M√âTODO CORRIGIDO: Exportar PDF
            exportarPDF() {
                try {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF();
                    
                    // Configura√ß√µes do documento
                    doc.setFont('helvetica', 'bold');
                    doc.setFontSize(20);
                    doc.setTextColor(40, 40, 40);
                    
                    // T√≠tulo
                    doc.text('RELAT√ìRIO DO JOGO - PERFIL MATEM√ÅTICO', 105, 20, { align: 'center' });
                    
                    // Data e informa√ß√µes
                    doc.setFontSize(12);
                    doc.setFont('helvetica', 'normal');
                    doc.text(`Data: ${new Date().toLocaleDateString('pt-BR')}`, 20, 35);
                    doc.text(`Categoria: ${this.getNomeCategoria(this.categoriaAtual)}`, 20, 42);
                    doc.text(`Total de Rodadas: ${this.totalRodadas}`, 20, 49);
                    doc.text(`Cartas Jogadas: ${this.cartasJogadas}`, 20, 56);
                    
                    // Classifica√ß√£o
                    doc.setFont('helvetica', 'bold');
                    doc.setFontSize(16);
                    doc.text('CLASSIFICA√á√ÉO FINAL', 105, 75, { align: 'center' });
                    
                    const equipesOrdenadas = [...this.equipes].sort((a, b) => b.pontos - a.pontos);
                    
                    // Cabe√ßalho da tabela
                    doc.setFillColor(74, 85, 104);
                    doc.setTextColor(255, 255, 255);
                    doc.rect(20, 85, 170, 10, 'F');
                    doc.text('POSI√á√ÉO', 25, 91);
                    doc.text('EQUIPE', 60, 91);
                    doc.text('PONTOS', 140, 91);
                    doc.text('ACERTOS', 160, 91);
                    
                    // Dados das equipes
                    doc.setTextColor(0, 0, 0);
                    doc.setFont('helvetica', 'normal');
                    doc.setFontSize(10);
                    
                    let yPos = 100;
                    equipesOrdenadas.forEach((equipe, index) => {
                        if (yPos > 270) {
                            doc.addPage();
                            yPos = 20;
                        }
                        
                        // Alternar cores das linhas
                        if (index % 2 === 0) {
                            doc.setFillColor(240, 240, 240);
                            doc.rect(20, yPos - 5, 170, 8, 'F');
                        }
                        
                        // Posi√ß√£o
                        doc.setFont('helvetica', 'bold');
                        doc.text(`${index + 1}¬∫`, 25, yPos);
                        
                        // Nome da equipe
                        doc.text(equipe.nome, 60, yPos);
                        
                        // Pontua√ß√£o
                        doc.text(equipe.pontos.toString(), 140, yPos);
                        
                        // Acertos
                        doc.text(equipe.acertos.toString(), 160, yPos);
                        
                        yPos += 8;
                    });
                    
                    // Estat√≠sticas
                    yPos += 15;
                    doc.setFont('helvetica', 'bold');
                    doc.setFontSize(14);
                    doc.text('ESTAT√çSTICAS GERAIS', 105, yPos, { align: 'center' });
                    yPos += 10;
                    
                    const totalPontos = equipesOrdenadas.reduce((sum, equipe) => sum + equipe.pontos, 0);
                    const totalAcertos = equipesOrdenadas.reduce((sum, equipe) => sum + equipe.acertos, 0);
                    const mediaPontos = totalPontos / this.equipes.length;
                    
                    doc.setFontSize(10);
                    doc.setFont('helvetica', 'normal');
                    doc.text(`Total de pontos distribu√≠dos: ${totalPontos}`, 20, yPos);
                    yPos += 6;
                    doc.text(`Total de acertos: ${totalAcertos}`, 20, yPos);
                    yPos += 6;
                    doc.text(`M√©dia de pontos por equipe: ${mediaPontos.toFixed(1)}`, 20, yPos);
                    yPos += 6;
                    doc.text(`Cartas jogadas: ${this.cartasJogadas}`, 20, yPos);
                    yPos += 6;
                    doc.text(`Rodadas realizadas: ${this.rodadaAtual - 1}`, 20, yPos);
                    
                    // Rodap√©
                    doc.setFontSize(8);
                    doc.setTextColor(100, 100, 100);
                    doc.text('Relat√≥rio gerado automaticamente pelo Perfil Matem√°tico', 105, 285, { align: 'center' });
                    
                    // Salvar o PDF
                    doc.save(`perfil-matematico-${new Date().toISOString().split('T')[0]}.pdf`);
                    
                } catch (error) {
                    console.error('Erro ao gerar PDF:', error);
                    alert('Erro ao gerar PDF. Verifique se h√° uma conex√£o com a internet para carregar as bibliotecas necess√°rias.');
                }
            }

            // M√âTODO CORRIGIDO: Exportar Excel
            exportarExcel() {
                try {
                    const equipesOrdenadas = [...this.equipes].sort((a, b) => b.pontos - a.pontos);
                    const totalPontos = equipesOrdenadas.reduce((sum, equipe) => sum + equipe.pontos, 0);
                    const totalAcertos = equipesOrdenadas.reduce((sum, equipe) => sum + equipe.acertos, 0);
                    const mediaPontos = totalPontos / this.equipes.length;
                    
                    // Criar conte√∫do CSV
                    let csvContent = "data:text/csv;charset=utf-8,";
                    
                    // Cabe√ßalho
                    csvContent += "PERFIL MATEM√ÅTICO - RELAT√ìRIO DO JOGO\r\n";
                    csvContent += `Data,${new Date().toLocaleDateString('pt-BR')}\r\n`;
                    csvContent += `Categoria,${this.getNomeCategoria(this.categoriaAtual)}\r\n`;
                    csvContent += `Total de Rodadas,${this.totalRodadas}\r\n`;
                    csvContent += `Cartas Jogadas,${this.cartasJogadas}\r\n`;
                    csvContent += `Rodadas Realizadas,${this.rodadaAtual - 1}\r\n`;
                    csvContent += "\r\n";
                    
                    // Classifica√ß√£o
                    csvContent += "CLASSIFICA√á√ÉO FINAL\r\n";
                    csvContent += "Posi√ß√£o,Equipe,Pontua√ß√£o,Acertos\r\n";
                    
                    equipesOrdenadas.forEach((equipe, index) => {
                        csvContent += `${index + 1},${equipe.nome},${equipe.pontos},${equipe.acertos}\r\n`;
                    });
                    
                    csvContent += "\r\n";
                    
                    // Estat√≠sticas
                    csvContent += "ESTAT√çSTICAS GERAIS\r\n";
                    csvContent += `Total de pontos distribu√≠dos,${totalPontos}\r\n`;
                    csvContent += `Total de acertos,${totalAcertos}\r\n`;
                    csvContent += `M√©dia de pontos por equipe,${mediaPontos.toFixed(1)}\r\n`;
                    csvContent += `Cartas jogadas,${this.cartasJogadas}\r\n`;
                    csvContent += `Rodadas realizadas,${this.rodadaAtual - 1}\r\n`;
                    
                    // Criar link de download
                    const encodedUri = encodeURI(csvContent);
                    const link = document.createElement("a");
                    link.setAttribute("href", encodedUri);
                    link.setAttribute("download", `perfil-matematico-${new Date().toISOString().split('T')[0]}.csv`);
                    document.body.appendChild(link);
                    
                    link.click();
                    document.body.removeChild(link);
                    
                } catch (error) {
                    console.error('Erro ao gerar Excel:', error);
                    alert('Erro ao gerar arquivo Excel.');
                }
            }

            // M√âTODO ATUALIZADO: Iniciar jogo com som
            iniciarJogo() {
                this.configurarEquipes();
                
                if (this.equipes.length === 0) {
                    alert('Por favor, adicione pelo menos uma equipe!');
                    return;
                }
                
                // Reset do sistema anti-repeti√ß√£o
                this.cartasUsadas = {
                    numeros: [],
                    algebra: [],
                    geometria: [],
                    trigonometria: [],
                    historia: [],
                    aleatoria: []
                };
                
                this.categoriaAtual = this.selectCategoria.value;
                this.totalRodadas = parseInt(this.selectRodadas.value);
                this.rodadaAtual = 1;
                this.cartasJogadas = 0;
                this.timeAtualIndex = 0;
                this.dicaAtualIndex = 0;
                this.respostaRevelada = false;
                this.ultimaRespostaErrada = false;
                this.btnTransferir.style.display = 'none';
                
                this.telaConfiguracao.classList.remove('ativa');
                this.telaApresentacao.classList.add('ativa');
                
                // Tocar som de in√≠cio
                this.tocarSom('inicio');
                
                this.iniciarRodada();
            }

            // M√âTODO ATUALIZADO: Revelar pr√≥xima dica com som
            revelarProximaDica() {
                this.dicaAtualIndex++;
                
                if (this.dicaAtualIndex < this.cartaAtual.dicas.length) {
                    const dicas = this.dicasContainer.querySelectorAll('.dica-apresentacao');
                    
                    dicas[this.dicaAtualIndex - 1].classList.remove('atual');
                    dicas[this.dicaAtualIndex - 1].classList.add('revelada');
                    
                    dicas[this.dicaAtualIndex].classList.remove('bloqueada');
                    dicas[this.dicaAtualIndex].classList.add('atual', 'dica-revelada');
                    dicas[this.dicaAtualIndex].innerHTML = `<span class="dica-numero">${this.dicaAtualIndex + 1}-</span> ${this.cartaAtual.dicas[this.dicaAtualIndex]}`;
                    
                    // Tocar som de dica
                    this.tocarSom('dica');
                    
                    if (this.dicaAtualIndex === this.cartaAtual.dicas.length - 1) {
                        this.btnProximaDica.disabled = true;
                        this.btnProximaDica.innerHTML = 'üö´ SEM MAIS DICAS';
                    }
                }
            }

            // M√âTODO ATUALIZADO: Tentar resposta com sons
            tentarResposta() {
                const respostaDigitada = this.inputResposta.value.trim().toUpperCase();
                
                if (!respostaDigitada) {
                    alert('Por favor, digite uma resposta!');
                    return;
                }

                const respostaCorreta = this.cartaAtual.resposta.toUpperCase();
                const acertou = respostaDigitada === respostaCorreta;
                
                this.resultadoTentativa.textContent = acertou ? 'üéâ RESPOSTA CORRETA!' : '‚ùå RESPOSTA INCORRETA!';
                this.resultadoTentativa.className = acertou ? 'resultado-tentativa resultado-correto' : 'resultado-tentativa resultado-incorreto';
                this.resultadoTentativa.style.display = 'block';
                
                if (acertou) {
                    // Tocar som de acerto
                    this.tocarSom('acerto');
                    
                    const timeAtual = this.equipes[this.timeAtualIndex];
                    const pontos = this.calcularPontuacao();
                    
                    timeAtual.pontos += pontos;
                    timeAtual.acertos++;
                    
                    this.inputResposta.disabled = true;
                    this.btnTentarResposta.disabled = true;
                    this.btnTransferir.style.display = 'none';
                    this.ultimaRespostaErrada = false;
                    
                    this.resultadoTentativa.style.animation = 'acerto 0.6s ease-in-out';
                    setTimeout(() => {
                        this.resultadoTentativa.style.animation = '';
                    }, 600);
                } else {
                    // Tocar som de erro
                    this.tocarSom('erro');
                    
                    this.ultimaRespostaErrada = true;
                    this.btnTransferir.style.display = 'block';
                    
                    this.resultadoTentativa.style.animation = 'erro 0.6s ease-in-out';
                    setTimeout(() => {
                        this.resultadoTentativa.style.animation = '';
                    }, 600);
                }
                
                this.atualizarPlacar();
            }

            // M√âTODO ATUALIZADO: Pr√≥ximo time com som
            proximoTime() {
                this.timeAtualIndex = (this.timeAtualIndex + 1) % this.equipes.length;
                this.atualizarTimeAtual();
                
                // Tocar som de pr√≥xima equipe
                this.tocarSom('proxima_equipe');
            }

            // M√âTODO ATUALIZADO: Finalizar jogo com som
            finalizarJogo() {
                // Tocar som de vit√≥ria
                this.tocarSom('final');
                
                this.telaApresentacao.classList.remove('ativa');
                this.telaResultadoFinal.classList.add('ativa');
                this.exibirResultadoFinal();
            }

            // M√âTODOS EXISTENTES (mantidos da vers√£o anterior)
            abrirModalEdicaoPlacar(indexEquipe) {
                this.equipeEditando = indexEquipe;
                const equipe = this.equipes[indexEquipe];
                
                this.infoEquipeEdicao.innerHTML = `
                    <div class="cor-marcador" style="background-color: ${equipe.cor}"></div>
                    <div>
                        <div style="font-weight: bold; font-size: 1.1em;">${equipe.nome}</div>
                        <div style="color: #718096; font-size: 0.9em;">Pontua√ß√£o atual: ${equipe.pontos}</div>
                    </div>
                `;
                
                this.inputNovosPontos.value = equipe.pontos;
                this.modalEdicaoPlacar.classList.add('ativa');
                this.inputNovosPontos.focus();
                this.inputNovosPontos.select();
            }

            confirmarEdicaoPlacar() {
                if (this.equipeEditando !== null) {
                    const novosPontos = parseInt(this.inputNovosPontos.value);
                    
                    if (!isNaN(novosPontos) && novosPontos >= 0) {
                        this.equipes[this.equipeEditando].pontos = novosPontos;
                        this.atualizarPlacar();
                        this.fecharModalEdicaoPlacar();
                    } else {
                        alert('Por favor, digite um n√∫mero v√°lido para a pontua√ß√£o!');
                    }
                }
            }

            fecharModalEdicaoPlacar() {
                this.modalEdicaoPlacar.classList.remove('ativa');
                this.equipeEditando = null;
            }

            atualizarIndicadorCategoria(categoria) {
                const configCategorias = {
                    numeros: { icone: 'üî¢', nome: 'N√öMEROS', classe: 'categoria-numeros' },
                    algebra: { icone: 'üìê', nome: '√ÅLGEBRA', classe: 'categoria-algebra' },
                    geometria: { icone: 'üìè', nome: 'GEOMETRIA', classe: 'categoria-geometria' },
                    trigonometria: { icone: 'üìä', nome: 'TRIGONOMETRIA', classe: 'categoria-trigonometria' },
                    historia: { icone: 'üìú', nome: 'HIST√ìRIA', classe: 'categoria-historia' },
                    aleatoria: { icone: 'üé≤', nome: 'ALEAT√ìRIA', classe: 'categoria-aleatoria' }
                };

                const config = configCategorias[categoria];
                if (config) {
                    this.categoriaIcone.textContent = config.icone;
                    this.categoriaNome.textContent = config.nome;
                    
                    // Remover todas as classes de categoria
                    this.categoriaIndicator.classList.remove(
                        'categoria-numeros', 'categoria-algebra', 'categoria-geometria',
                        'categoria-trigonometria', 'categoria-historia', 'categoria-aleatoria'
                    );
                    
                    // Adicionar a classe correta
                    this.categoriaIndicator.classList.add(config.classe);
                }
            }

            obterCartaAleatoria(categoria) {
                let cartasDisponiveis;
                
                if (categoria === 'aleatoria') {
                    // Para categoria aleat√≥ria, pegar de todas as categorias
                    const todasCartas = [];
                    Object.values(cartasPorCategoria).forEach(cartasCategoria => {
                        cartasCategoria.forEach(carta => {
                            if (!this.cartasUsadas.aleatoria.includes(carta.resposta)) {
                                todasCartas.push(carta);
                            }
                        });
                    });
                    cartasDisponiveis = todasCartas;
                } else {
                    // Para categorias espec√≠ficas
                    const cartas = cartasPorCategoria[categoria];
                    if (!cartas || cartas.length === 0) return null;
                    
                    cartasDisponiveis = cartas.filter(carta => 
                        !this.cartasUsadas[categoria].includes(carta.resposta)
                    );
                }
                
                if (cartasDisponiveis.length === 0) {
                    // Reset da categoria se todas as cartas foram usadas
                    if (categoria === 'aleatoria') {
                        this.cartasUsadas.aleatoria = [];
                        // Pegar qualquer carta de qualquer categoria
                        const todasCartas = Object.values(cartasPorCategoria).flat();
                        return todasCartas[Math.floor(Math.random() * todasCartas.length)];
                    } else {
                        this.cartasUsadas[categoria] = [];
                        return cartasPorCategoria[categoria][Math.floor(Math.random() * cartasPorCategoria[categoria].length)];
                    }
                }
                
                // Escolher aleatoriamente entre as dispon√≠veis
                const carta = cartasDisponiveis[Math.floor(Math.random() * cartasDisponiveis.length)];
                
                if (categoria === 'aleatoria') {
                    this.cartasUsadas.aleatoria.push(carta.resposta);
                } else {
                    this.cartasUsadas[categoria].push(carta.resposta);
                }
                
                return carta;
            }

            atualizarBotoesCategoriaModal() {
                this.botoesCategoriaModal.forEach(btn => {
                    const categoria = btn.dataset.categoria;
                    if (categoria !== 'aleatoria') {
                        const cartas = cartasPorCategoria[categoria];
                        const cartasUsadas = this.cartasUsadas[categoria].length;
                        const totalCartas = cartas.length;
                        
                        if (cartasUsadas >= totalCartas) {
                            btn.classList.add('esgotada');
                            btn.innerHTML = `üîí ${btn.textContent} (ESGOTADA)`;
                        } else {
                            btn.classList.remove('esgotada');
                            btn.innerHTML = btn.textContent.replace(/\(.*\)/, '');
                        }
                    }
                });
            }

            abrirModalCategoria() {
                this.atualizarBotoesCategoriaModal();
                this.modalCategoria.classList.add('ativa');
            }

            selecionarCategoriaModal(categoria) {
                const btn = document.querySelector(`.btn-categoria-modal[data-categoria="${categoria}"]`);
                if (btn.classList.contains('esgotada') && categoria !== 'aleatoria') {
                    alert(`Todas as cartas de ${this.getNomeCategoria(categoria)} j√° foram usadas! Escolha outra categoria.`);
                    return;
                }
                
                this.categoriaAtual = categoria;
                this.fecharModalCategoria();
                this.proximaCarta();
            }

            getNomeCategoria(categoria) {
                const nomes = {
                    numeros: "N√∫meros",
                    algebra: "√Ålgebra", 
                    geometria: "Geometria",
                    trigonometria: "Trigonometria",
                    historia: "Hist√≥ria",
                    aleatoria: "Aleat√≥ria"
                };
                return nomes[categoria] || categoria;
            }

            iniciarRodada() {
                if (this.categoriaAtual === 'aleatoria') {
                    // J√° tratado no obterCartaAleatoria
                }
                
                this.cartaAtual = this.obterCartaAleatoria(this.categoriaAtual);
                this.dicaAtualIndex = 0;
                this.cartasJogadas++;
                this.respostaRevelada = false;
                this.ultimaRespostaErrada = false;
                this.btnTransferir.style.display = 'none';
                
                if (!this.cartaAtual) {
                    alert(`N√£o h√° mais cartas dispon√≠veis em ${this.getNomeCategoria(this.categoriaAtual)}!`);
                    this.abrirModalCategoria();
                    return;
                }
                
                // ATUALIZAR INDICADOR DE CATEGORIA
                this.atualizarIndicadorCategoria(this.categoriaAtual);
                
                this.exibirCarta();
                this.atualizarTimeAtual();
                this.limparAreaResposta();
            }

            transferirPergunta() {
                this.btnTransferir.style.display = 'none';
                this.ultimaRespostaErrada = false;
                this.proximoTime();
                this.inputResposta.disabled = false;
                this.btnTentarResposta.disabled = false;
                this.limparAreaResposta();
            }

            inicializarEquipesPadrao() {
                const equipesPadrao = [
                    { nome: "Time Alpha", cor: "#e53e3e" },
                    { nome: "Time Beta", cor: "#3182ce" },
                    { nome: "Time Gama", cor: "#38a169" }
                ];

                equipesPadrao.forEach((equipe, index) => {
                    this.criarElementoEquipe(equipe.nome, equipe.cor, index);
                });

                this.adicionarBotaoNovaEquipe();
            }

            criarElementoEquipe(nome, cor, index) {
                const equipeDiv = document.createElement('div');
                equipeDiv.className = 'equipe-config';
                equipeDiv.innerHTML = `
                    <h3>üë• EQUIPE ${String.fromCharCode(65 + index)}</h3>
                    <input type="text" class="input-equipe" data-index="${index}" placeholder="Nome da equipe" value="${nome}">
                    <input type="color" class="cor-equipe" data-index="${index}" value="${cor}">
                    ${index >= 3 ? '<button class="btn-remover-equipe" style="background: #e53e3e; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer; width: 100%; margin-top: 5px;">üóëÔ∏è Remover</button>' : ''}
                `;
                
                this.containerEquipes.appendChild(equipeDiv);

                if (index >= 3) {
                    const btnRemover = equipeDiv.querySelector('.btn-remover-equipe');
                    btnRemover.addEventListener('click', () => this.removerEquipe(index));
                }
            }

            adicionarBotaoNovaEquipe() {
                if (this.containerEquipes.children.length < this.maxEquipes) {
                    const btnAdicionar = document.createElement('div');
                    btnAdicionar.className = 'btn-adicionar-equipe';
                    btnAdicionar.innerHTML = `
                        <div class="icone">‚ûï</div>
                        <div>ADICIONAR EQUIPE</div>
                    `;
                    btnAdicionar.addEventListener('click', () => this.adicionarNovaEquipe());
                    this.containerEquipes.appendChild(btnAdicionar);
                }
            }

            adicionarNovaEquipe() {
                const index = this.containerEquipes.children.length - 1;
                const cores = ['#d69e2e', '#805ad5', '#ed64a6'];
                const cor = cores[(index - 3) % cores.length];
                
                const btnAdicionar = this.containerEquipes.lastChild;
                this.containerEquipes.removeChild(btnAdicionar);
                
                this.criarElementoEquipe(`Time ${String.fromCharCode(68 + index - 3)}`, cor, index);
                this.adicionarBotaoNovaEquipe();
            }

            removerEquipe(index) {
                const equipeDiv = Array.from(this.containerEquipes.children).find(child => {
                    const input = child.querySelector('.input-equipe');
                    return input && parseInt(input.dataset.index) === index;
                });
                
                if (equipeDiv) {
                    this.containerEquipes.removeChild(equipeDiv);
                    this.reindexarEquipes();
                    
                    const btnAdicionar = this.containerEquipes.querySelector('.btn-adicionar-equipe');
                    if (btnAdicionar) {
                        this.containerEquipes.removeChild(btnAdicionar);
                    }
                    this.adicionarBotaoNovaEquipe();
                }
            }

            reindexarEquipes() {
                const equipesDivs = Array.from(this.containerEquipes.children).filter(child => 
                    child.classList.contains('equipe-config')
                );
                
                equipesDivs.forEach((div, newIndex) => {
                    const input = div.querySelector('.input-equipe');
                    const colorInput = div.querySelector('.cor-equipe');
                    const h3 = div.querySelector('h3');
                    
                    if (input && colorInput && h3) {
                        input.dataset.index = newIndex;
                        colorInput.dataset.index = newIndex;
                        h3.textContent = `üë• EQUIPE ${String.fromCharCode(65 + newIndex)}`;
                        
                        const btnRemover = div.querySelector('.btn-remover-equipe');
                        if (btnRemover) {
                            btnRemover.addEventListener('click', () => this.removerEquipe(newIndex));
                        }
                    }
                });
            }

            configurarEquipes() {
                this.equipes = [];
                const inputsEquipe = this.containerEquipes.querySelectorAll('.input-equipe');
                
                inputsEquipe.forEach((input, index) => {
                    const nome = input.value.trim();
                    const corInput = this.containerEquipes.querySelector(`.cor-equipe[data-index="${input.dataset.index}"]`);
                    const cor = corInput ? corInput.value : this.gerarCorAleatoria();
                    
                    if (nome) {
                        this.equipes.push({
                            nome: nome,
                            cor: cor,
                            pontos: 0,
                            acertos: 0,
                            erros: 0
                        });
                    }
                });
                
                this.atualizarPlacar();
            }

            exibirCarta() {
                this.tituloCarta.textContent = 'EU SOU...';
                this.dicasContainer.innerHTML = '';
                this.btnProximaDica.disabled = false;
                this.respostaReveladaDiv.classList.remove('ativa');
                this.btnProximaDica.innerHTML = 'üí° PR√ìXIMA DICA';
                
                this.cartaAtual.dicas.forEach((dica, index) => {
                    const elementoDica = document.createElement('div');
                    elementoDica.className = 'dica-apresentacao';
                    
                    if (index === 0) {
                        elementoDica.classList.add('atual');
                        elementoDica.innerHTML = `<span class="dica-numero">${index + 1}-</span> ${dica}`;
                    } else if (index === 1) {
                        elementoDica.classList.add('bloqueada');
                        elementoDica.innerHTML = `<span class="dica-numero">${index + 1}-</span> ???`;
                    } else {
                        elementoDica.classList.add('bloqueada');
                        elementoDica.innerHTML = `<span class="dica-numero">${index + 1}-</span> üîí Dica bloqueada`;
                    }
                    
                    this.dicasContainer.appendChild(elementoDica);
                });
            }

            limparAreaResposta() {
                this.inputResposta.value = '';
                this.resultadoTentativa.className = 'resultado-tentativa';
                this.resultadoTentativa.style.display = 'none';
                this.inputResposta.disabled = false;
                this.btnTentarResposta.disabled = false;
            }

            revelarResposta() {
                this.respostaRevelada = true;
                this.respostaCorretaDiv.textContent = this.cartaAtual.resposta;
                this.respostaReveladaDiv.classList.add('ativa');
                
                this.inputResposta.disabled = true;
                this.btnTentarResposta.disabled = true;
                this.btnTransferir.style.display = 'none';
            }

            atualizarTimeAtual() {
                const timeAtual = this.equipes[this.timeAtualIndex];
                this.timeAtual.textContent = timeAtual.nome;
                this.timeAtual.style.backgroundColor = timeAtual.cor;
                this.timeAtual.style.color = this.getContrastColor(timeAtual.cor);
                
                this.atualizarPlacar();
            }

            atualizarPlacar() {
                this.listaPlacar.innerHTML = '';
                
                this.equipes.forEach((equipe, index) => {
                    const elementoEquipe = document.createElement('div');
                    elementoEquipe.className = 'equipe-placar';
                    
                    if (index === this.timeAtualIndex) {
                        elementoEquipe.classList.add('ativa');
                    }
                    
                    elementoEquipe.innerHTML = `
                        <div class="info-equipe">
                            <div class="cor-marcador" style="background-color: ${equipe.cor}"></div>
                            <div class="nome-equipe">${equipe.nome}</div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div class="pontos-equipe">${equipe.pontos}</div>
                            <button class="btn-editar-placar" data-index="${index}">‚úèÔ∏è</button>
                        </div>
                    `;
                    
                    // Evento para o bot√£o de edi√ß√£o
                    const btnEditar = elementoEquipe.querySelector('.btn-editar-placar');
                    btnEditar.addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.abrirModalEdicaoPlacar(index);
                    });
                    
                    if (this.ultimaRespostaErrada) {
                        elementoEquipe.style.cursor = 'pointer';
                    }
                    
                    this.listaPlacar.appendChild(elementoEquipe);
                });
            }

            calcularPontuacao() {
                return Math.max(20, 100 - (this.dicaAtualIndex * 10));
            }

            proximaCarta() {
                if (this.cartasJogadas >= this.totalRodadas) {
                    this.finalizarJogo();
                } else {
                    this.rodadaAtual++;
                    this.dicaAtualIndex = 0;
                    this.iniciarRodada();
                }
            }

            exibirResultadoFinal() {
                const equipesOrdenadas = [...this.equipes].sort((a, b) => b.pontos - a.pontos);
                const vencedor = equipesOrdenadas[0];
                
                document.getElementById('nomeVencedor').textContent = vencedor.nome;
                document.getElementById('pontuacaoVencedor').textContent = `${vencedor.pontos} PONTOS`;
                document.getElementById('areaVencedor').style.background = `linear-gradient(135deg, ${vencedor.cor}, ${this.escurecerCor(vencedor.cor)})`;
                
                const classificacaoFinal = document.getElementById('classificacaoFinal');
                classificacaoFinal.innerHTML = '';
                
                equipesOrdenadas.forEach((equipe, index) => {
                    const posicao = document.createElement('div');
                    posicao.className = 'posicao';
                    
                    if (index === 0) posicao.classList.add('primeiro');
                    else if (index === 1) posicao.classList.add('segundo');
                    else if (index === 2) posicao.classList.add('terceiro');
                    
                    posicao.innerHTML = `
                        <h3>${index + 1}¬∫ LUGAR</h3>
                        <div style="display: flex; align-items: center; gap: 8px; margin: 8px 0;">
                            <div style="width: 16px; height: 16px; border-radius: 50%; background-color: ${equipe.cor}; border: 2px solid white;"></div>
                            <strong style="font-size: 1em;">${equipe.nome}</strong>
                        </div>
                        <div style="font-size: 1.3em; font-weight: bold; color: #4a5568;">${equipe.pontos} pontos</div>
                        <div style="color: #666; margin-top: 5px; font-size: 0.9em;">${equipe.acertos} acertos</div>
                    `;
                    
                    classificacaoFinal.appendChild(posicao);
                });
            }

            novoJogo() {
                this.telaResultadoFinal.classList.remove('ativa');
                this.telaConfiguracao.classList.add('ativa');
            }

            fecharModalCategoria() {
                this.modalCategoria.classList.remove('ativa');
            }

            gerarCorAleatoria() {
                const cores = ['#e53e3e', '#3182ce', '#38a169', '#d69e2e', '#805ad5', '#ed64a6'];
                return cores[Math.floor(Math.random() * cores.length)];
            }

            getContrastColor(hexcolor) {
                const r = parseInt(hexcolor.substr(1, 2), 16);
                const g = parseInt(hexcolor.substr(3, 2), 16);
                const b = parseInt(hexcolor.substr(5, 2), 16);
                const yiq = ((r * 299) + (g * 587) + (b * 114)) / 1000;
                return (yiq >= 128) ? '#000000' : '#FFFFFF';
            }

            escurecerCor(hexcolor) {
                let r = parseInt(hexcolor.substr(1, 2), 16);
                let g = parseInt(hexcolor.substr(3, 2), 16);
                let b = parseInt(hexcolor.substr(5, 2), 16);
                
                r = Math.max(0, r - 40);
                g = Math.max(0, g - 40);
                b = Math.max(0, b - 40);
                
                return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;
            }
        }

        // Inicializar o jogo quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', () => {
            new PerfilMatematicoApresentacao();
        });
    </script>
</body>
</html>